function getAngularScope(){return"undefined"!=typeof angular?angular.element($("body")).scope():void 0}function addPrototypeMethod(a,b,c){var d=a.prototype;d[b]||Object.defineProperty(d,b,{writable:!0,enumerable:!1,value:c})}if(window.postMessageHandler=function(a){if("undefined"!=typeof a.data){var b=a.data;if("undefined"!=typeof b.type&&"undefined"!=typeof b.data){var c=b.data,d=b.type;"switchMode"==d&&switchMode(c)}}},window.switchMode=function(a){var b="live";"prematch"==a.toLowerCase()&&(b="prematch");var c=getAngularScope();if("undefined"!=typeof c.stateHelper){var d={notify:!0,reload:!0};c.stateHelper.go(b,{},d)}},window.addEventListener("message",postMessageHandler,!1),window.tellParentThatBalancesHaveUpdated=function(){"undefined"!=typeof window.parent&&(console.log("Notifying parent that the balances may have changed"),window.parent.postMessage({type:"externalUpdateBalances",data:{}},"*"))},setInterval(function(){tellParentThatBalancesHaveUpdated()},6e4),!window.console)var console={};console.log||(console.log=function(){}),console.info||(console.info=function(){}),console.error||(console.error=function(){});var bu=window.bu={};bu.directives=angular.module("directives",["pascalprecht.translate"]),bu.filters=angular.module("filters",[]),bu.utils=angular.module("buUtils",[]),bu.templates=angular.module("buTemplates",[]),bu.betLobby=angular.module("betLobby",["ngScrollbars","ngCookies","ui.router","ngAnimate","buTemplates","ui.bootstrap","directives","filters","buUtils","angularSpinner","pascalprecht.translate"]).config(["ScrollBarsProvider","$locationProvider","$stateProvider","$urlRouterProvider",function(a,b,c,d){a.defaults={theme:"minimal",axis:"y"},b.html5Mode({enabled:!1,requireBase:!0}),d.otherwise("/home"),c.state("prematch",{url:"/prematch",controller:"LobbyController",data:{oddModeOverride:0}}).state("prematchWithSport",{url:"/prematch/:sportName",controller:"LobbyController",data:{oddModeOverride:0}}).state("prematchWithSportAndLeague",{url:"/prematch/:sportName/:leagueID",controller:"LobbyController",data:{oddModeOverride:0}}).state("prematchWithSportAndLeagueAndEvent",{url:"/prematch/:sportName/:leagueID/:eventID",controller:"LobbyController",data:{oddModeOverride:0}}).state("live",{url:"/live",controller:"LobbyController",data:{oddModeOverride:1}}).state("liveWithSport",{url:"/live/:sportName",controller:"LobbyController",data:{oddModeOverride:1}}).state("liveWithSportAndEvent",{url:"/live/:sportName/:eventID",controller:"LobbyController",data:{oddModeOverride:1}}).state("home",{url:"/home",controller:"LobbyController",data:{oddModeOverride:1}})}]).config(["$httpProvider",function(a){a.defaults.withCredentials=!0}]).config(["$compileProvider",function(a){a.debugInfoEnabled(!1)}]).factory("customStorage",function(){return{put:function(a,b){window.setSelectedLanguage(b),localStorage.setItem(a,b)},get:function(a){return localStorage.getItem(a)}}}).config(["$translateProvider",function(a){a.useStorage("customStorage"),a.useStaticFilesLoader({prefix:"./assets/languages/",suffix:".json"}),a.preferredLanguage("en-US")}]),$(document).ready(function(){function a(){var a=$(".virtual-scroll");0!==a.length&&a.each(function(a){var b="calc(100vh - "+Math.round($(this).offset().top)+"px)";this.style.height!==b&&$(this).css("height",b)})}var b=$(window),c=$(".follow-scroll"),d=0,e=c.scope();window.calcWidth=b.width();var f=0;c[0]&&(d=c.offset().top),setInterval(a,30),b.on("scroll",function(){if(c[0]||(c=$(".follow-scroll"),e=c.scope()),window.calcWidth>1280&&e&&!e.emergency_mode&&(!e.isMobile||e.betSlipActive)){var a=b.scrollTop();c.stop(!1,!1).animate({top:d>a?0:a-d+f},300)}})}),angular.module("betLobby").animation(".logEntry",[function(){return{enter:function(a,b){jQuery(a).fadeIn(1e3,b)},move:function(a,b){},leave:function(a,b){jQuery(a).hide()}}}]),angular.module("betLobby").constant("EventOutcome",function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U){this.id=b,this.eventid=c,this.outcomeid=d,this.bookmakerid=e,this.islive=f,this.lastupdate=g,this.externaloddsid=h,this.bet=i,this.startprice=j,this.currentprice=k,this.market_price=l,this.price_american=m,this.line=n,this.market_line=o,this.last_policy_applied=p,this.last_policy_data=q,this.status=r,this.timecreated=s,this.is_winner=t,this.last_seen=u,this.round_data=v,this.trueUpdate=w,this.priceAdjusetd=x,this.lst=y,this.sportid=z,this.leagueid=A,this.index=B,this.direction=C,this.display=D,this.column=E,this.row=F,this.hometeamname=G,this.awayteamname=H,this.parent_externaloddsid=I,this.is_trade_override=J,this.is_generator_driver=K,this.profileid=L,this.eventexternalid=M,this.true_update_override=N,this.suspended=O,this.alternate_american=P,this.betImmutable=Q,this.betLST=R,this.team_separator_parsed=S,this.true_right_hand_team_name=T,this.true_left_hand_team_name=U}).constant("MarketCount",function b(a,c,d,e,f){this.eventid=a,this.openMarkets=c,this.temporarilySuspendedMarkets=d,this.lastupdate=e,this.lastupdatedb=f}),angular.module("betLobby").constant("sportComments",{1:{1014:{id:"1014",ispostback:!1,desc:"Kick Off",image:"1-kickoff",cwtm:!1},1015:{id:"1015",ispostback:!1,desc:"End of First Half",cwtm:!1},1016:{id:"1016",ispostback:!1,desc:"End of Second Half",cwtm:!1},1017:{id:"1017",ispostback:!1,desc:"Full Time",image:"ft",cwtm:!1},1018:{id:"1018",ispostback:!1,desc:"Extra Time - 1st Half",image:"et_1st_started",cwtm:!1},1019:{id:"1019",ispostback:!1,desc:"Extra Time - End of 1st Half",image:"et_ht",cwtm:!1},1020:{id:"1020",ispostback:!1,desc:"Extra Time - 2nd Half",image:"et_2nd_started",cwtm:!1},1021:{id:"1021",ispostback:!1,desc:"End Extra Time",image:"end_et",cwtm:!1},1022:{id:"1022",ispostback:!1,desc:"Penalty Shootout",image:"penalty_shootout",cwtm:!1},1025:{id:"1025",ispostback:!1,desc:"Injury",cwtm:!1},1000:{id:"1000",ispostback:!1,desc:"Dangerous Attack",image:"1-dangerous_attack",cwtm:!0},1001:{id:"1001",ispostback:!1,desc:"Attack",image:"1-attack",cwtm:!0},1002:{id:"1001",ispostback:!1,desc:"In Possession",image:"1-possession",cwtm:!0},1003:{id:"1003",ispostback:!0,desc:"Goal",image:"1-goal",cwtm:!0},1004:{id:"1004",ispostback:!0,desc:"Corner",image:"1-corner_bottom",cwtm:!0},1005:{id:"1005",ispostback:!0,desc:"Yellow Card",image:"1-yellow",cwtm:!0},1006:{id:"1006",ispostback:!0,desc:"Red Card",image:"1-red",cwtm:!0},1007:{id:"1007",ispostback:!0,desc:"Goal Kick",cwtm:!0},1008:{id:"1008",ispostback:!0,desc:"Penalty",image:"1-penalty",cwtm:!0},1009:{id:"1009",ispostback:!0,desc:"Free Kick Zone 2",image:"1-freekick",cwtm:!0},1234:{id:"1234",ispostback:!0,desc:"Off sides",image:"offsides",cwtm:!0},1010:{id:"1010",ispostback:!0,desc:"Free Kick Zone 5",image:"1-freekick",cwtm:!0},1236:{id:"1236",ispostback:!0,desc:"Free Kick",image:"1-dangerous_freekick",cwtm:!0},1239:{id:"1239",ispostback:!0,desc:"Corner",image:"1-corner_top",cwtm:!0},1011:{id:"1011",ispostback:!0,desc:"Shot on Target",image:"1-shot_on_target",cwtm:!0},1012:{id:"1012",ispostback:!0,desc:"Shot off Target",image:"1-shot_off_target",cwtm:!0},1238:{id:"1238",ispostback:!0,desc:"Substitution",image:"1-substitution",cwtm:!0},1023:{id:"1023",ispostback:!0,desc:"Penalty Missed",image:"1-penalty_missed",cwtm:!0},1024:{id:"1024",ispostback:!0,desc:"Throw-In",image:"1-throwin",cwtm:!0},1237:{id:"1237",ispostback:!0,desc:"Throw-In",image:"1-throwin",cwtm:!0},"0008":{id:"0008",ispostback:!0,desc:"Shootout Score",image:"1-penalty_scored",cwtm:!0},"0009":{id:"0009",ispostback:!0,desc:"Shootout Miss",image:"1-penalty_missed",cwtm:!0},"0021":{id:"0021",ispostback:!0,desc:"Shootout To Take",cwtm:!0}},6:{1082:{id:"1082",ispostback:!1,desc:"End of Quarter",cwtm:!1},1083:{id:"1083",ispostback:!1,desc:"End of Half",cwtm:!1},1084:{id:"1084",ispostback:!1,desc:"End of Match",cwtm:!1},1085:{id:"1085",ispostback:!1,desc:"Overtime",cwtm:!1},1077:{id:"1077",ispostback:!1,desc:"In Possession",cwtm:!0},1078:{id:"1078",ispostback:!0,desc:"Free Throw",cwtm:!0},1079:{id:"1079",ispostback:!0,desc:"Free Throw - SCORED",cwtm:!0},1080:{id:"1080",ispostback:!0,desc:"Free Throw - MISSED",cwtm:!0},1074:{id:"1074",ispostback:!0,desc:"2 - pointer",cwtm:!0},1075:{id:"1075",ispostback:!0,desc:"3 - pointer",cwtm:!0},1081:{id:"1081",ispostback:!1,desc:"Timeout",cwtm:!0},1086:{id:"1086",ispostback:!0,desc:"Foul",cwtm:!0}},7:{1113:{id:"1113",ispostback:!1,desc:"Serving",cwtm:!0},1114:{id:"1114",ispostback:!0,desc:"Point",cwtm:!0},1115:{id:"1115",ispostback:!0,desc:"Fault",cwtm:!0},1116:{id:"1116",ispostback:!0,desc:"Double Fault",cwtm:!0},1117:{id:"1117",ispostback:!0,desc:"Ace",cwtm:!0},1118:{id:"1118",ispostback:!0,desc:"Break Point",cwtm:!0,exp:6e3},1119:{id:"1119",ispostback:!0,desc:"Game",cwtm:!0,exp:8e3},1120:{id:"1120",ispostback:!1,desc:"Game",cwtm:!1},1121:{id:"1121",ispostback:!0,desc:"Let First Serve",cwtm:!0},1122:{id:"1122",ispostback:!0,desc:"Let Second Serve",cwtm:!0},1123:{id:"1123",ispostback:!0,desc:"Game, Set, Match",cwtm:!1},1124:{id:"1124",ispostback:!1,desc:"End of Set",cwtm:!1},1125:{id:"1124",ispostback:!0,desc:"Tie Break",cwtm:!0},1126:{id:"1126",ispostback:!1,desc:"Injury Break",cwtm:!1},1127:{id:"1127",ispostback:!1,desc:"Rain Delay",cwtm:!1},1128:{id:"1128",ispostback:!0,desc:"Challenge",cwtm:!0},1129:{id:"1129",ispostback:!0,desc:"Challenge Success",cwtm:!0},1130:{id:"1130",ispostback:!0,desc:"Challenge Fail",cwtm:!0},1131:{id:"1131",ispostback:!0,desc:"Stat Adjust",cwtm:!0},1132:{id:"1132",ispostback:!0,desc:"Tie Break",cwtm:!0},1134:{id:"1134",ispostback:!1,desc:"First Set",cwtm:!1},1135:{id:"1135",ispostback:!1,desc:"Second Set",cwtm:!1},1136:{id:"1136",ispostback:!1,desc:"Third Set",cwtm:!1},1137:{id:"1137",ispostback:!1,desc:"Fourth Set",cwtm:!1},1138:{id:"1138",ispostback:!1,desc:"Final Set",cwtm:!1}},10:{1210:{id:"1210",ispostback:!1,desc:"Inning Start",cwtm:!1},1211:{id:"1211",ispostback:!1,desc:"Ball is in play",cwtm:!1},1212:{id:"1212",ispostback:!0,desc:"Single",cwtm:!1},1213:{id:"1213",ispostback:!0,desc:"Double",cwtm:!1},1214:{id:"1214",ispostback:!0,desc:"Triple",cwtm:!1},1215:{id:"1215",ispostback:!0,desc:"Home Run",cwtm:!1},1216:{id:"1216",ispostback:!0,desc:"Run Scored",cwtm:!1},1217:{id:"1217",ispostback:!0,desc:"Ball",cwtm:!1},1218:{id:"1218",ispostback:!0,desc:"Strike",cwtm:!1},1219:{id:"1219",ispostback:!0,desc:"Foul",cwtm:!1},1220:{id:"1220",ispostback:!0,desc:"Double Play",cwtm:!1},1221:{id:"1221",ispostback:!0,desc:"Triple Play",cwtm:!1},1222:{id:"1222",ispostback:!0,desc:"Hit",cwtm:!1},1223:{id:"1223",ispostback:!0,desc:"Sacrifice Fly",cwtm:!1},1224:{id:"1224",ispostback:!0,desc:"Bunt",cwtm:!1},1225:{id:"1225",ispostback:!0,desc:"Out",cwtm:!1,swap:!0},1226:{id:"1226",ispostback:!1,desc:"End of Half Inning",cwtm:!0},1227:{id:"1227",ispostback:!0,desc:"Walk",cwtm:!1},1228:{id:"1228",ispostback:!0,desc:"Intentional Walk",cwtm:!1},1229:{id:"1229",ispostback:!0,desc:"Steal",cwtm:!1},1230:{id:"1230",ispostback:!0,desc:"Caught Stealing",cwtm:!1},1231:{id:"1231",ispostback:!0,desc:"Reach On Error",cwtm:!1},1232:{id:"1232",ispostback:!0,desc:"Fielder's Choice",cwtm:!1},1240:{id:"1240",ispostback:!1,desc:"New Batter",cwtm:!1,swap:!0},1241:{id:"1241",ispostback:!1,desc:"New Pitcher",cwtm:!1,swap:!0},1244:{id:"1244",ispostback:!1,desc:"End Game",cwtm:!1}}}),angular.module("betLobby").controller("LobbyController",["$scope","$http","$timeout","$interval","$cookies","ws","ajax","$log","$anchorScroll","$location","$state","sportComments","EventOutcomeFromStringRepresentation","$window","$sce","$filter","defer","$rootScope","oddsGroupHelper","requiredMarketsForGamePageBySport","marketPlaceholderValuesBySport","MarketCount","$translate",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){function x(b,c){function d(c,k,l){f=c.slice(k,l),f.forEach(function(c){var d=!0,f=document.createElement("li");if(f.className="item clearfix",c.id===g.id&&f.classList.add("active"),!a.ifEventBlocked(c)){var k=document.createElement("div");k.className="oddsMarketTableWrapper",f.appendChild(k);var l=document.createElement("div");l.className="oddsMarketTableWrapperRow",k.appendChild(l);var m=document.createElement("div");m.className="hr",l.appendChild(m);var n=document.createElement("div");n.className="title box withSpecialBottomMargin",n.addEventListener("click",function(d){a.getOddsWrapper(a.sportOpened.name,b.id,c.id)}),l.appendChild(n);var o=document.createElement("h4");o.className="sport-ui-main-title",n.appendChild(o);var q=document.createElement("span");q.innerHTML=c.true_left_hand_team_name+" "+c.team_separator_parsed+"&nbsp;",o.appendChild(q);var r=document.createElement("wbr");o.appendChild(r);var s=document.createElement("br");o.appendChild(s);var t=document.createElement("span");t.textContent=c.true_right_hand_team_name,o.appendChild(t);var u=document.createElement("span");u.className="date",u.textContent=moment(1e3*c.startdate).format("MMM D HH:mm"),n.appendChild(u);var v=document.createElement("div");v.className="rightInfo",n.appendChild(v);var w=document.createElement("span");w.className="count",w.textContent="+"+c.market_count,v.appendChild(w);var x=document.createElement("i");x.className=c.id!==g.id?"icon-down-open":"icon-right-open",v.appendChild(x);var z=document.createElement("div");if(z.className="oddsMarketTableWrapperRow marketParticipantsArea",k.appendChild(z),h[c.id]){var A=p("oddOrderImproved")(h[c.id][j],i);A.forEach(function(b){if(b.lst&&i[c.sportid][b.outcomeid][j].display&&a.canParlayOutcome(c.sportid,b.outcomeid)&&!a.marketBlockedForEvent(c.externalid,b.outcomeid)){var e=document.createElement("div");z.appendChild(e);var f=document.createElement("div");f.className="oddsMarketTable withSpecialTopMargin",e.appendChild(f);for(var g in b.entries){var h=b.entries[g],k=document.createElement("div");k.className="oddsMarketRow",f.innerHTML="",f.appendChild(k);for(var l in h){var m=h[l];0===m.entity.currentprice&&0===m.entity.price_american&&(d=!1);var n=document.createElement("div");if(n.className="nopadding columnOdd oddsMarketColumn box "+a.getColumnOddClass(m.entity,b.maxCC||"countMaxColumn3",m.placeholder),m.entity&&m.id&&("TemporarilySuspended"===m.entity.status||"Open"===m.entity.status)){var o=document.createElement("div");o.className="box middle",a.isOddInBetSlip(m.entity)&&o.classList.add("odd-in-bet-slip"),function(b,c){b.addEventListener("click",function(){a.addToBetSlip(c),a.isOddInBetSlip(c)&&b.classList.add("odd-in-bet-slip")})}(o,m.entity),n.appendChild(o);var p=document.createElement("div");p.className="participant_wrapper",o.appendChild(p);var q=document.createElement("h4");q.className="withExtraPadding",q.innerHTML=m.placeholder?"&nbsp;":m.entity.display_html,p.appendChild(q);var r=document.createElement("span");r.id=m.entity.externaloddsid,y(r,m.entity),p.appendChild(r)}else n.style.visibility="hidden";k.appendChild(n)}}}})}}d&&e.appendChild(f)}),l<c.length&&setTimeout(function(){d(c,k+25,Math.min(l+25,c.length))},100)}var e=document.querySelectorAll(".games-list")[c],f=b.eventsarray,g=a.eventOpened,h=a.marketsByEventID,i=a.outcomes,j=a.oddMode,k=a.oddFormat;e.innerHTML="",d(f,0,Math.min(25,f.length))}function y(b,c){function d(a,b){return a.parentNode?a.parentNode.tagName===b.ToUpperCase()?a.parentNode:d(a.parentNode,b):null}if(0===c.currentprice&&0===c.price_american){var e=d(b,"LI");e&&e.parentNode.removeChild(e)}b.className="price "+(c.className||"noAnimate");var f=parseFloat(c.currentprice||0).toFixed(2),g=parseFloat(c.price_american||0).toFixed(0);c.price_american>0&&(g="+"+g),b.textContent=1===a.oddFormat?f:g}function z(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}function A(b){a[b]=J}function B(b){a[b]+=K}function C(){for(var b=a.leagueOpened,c=b.length,d=0;c--;)b[c].events&&(d+=Object.keys(b[c].events).length);return d}function D(a){var b=document.getElementById(a.externaloddsid);b&&b.parentNode.parentNode.classList.remove("odd-in-bet-slip")}var E=$(n),F=document.body,G=["TemporarilySuspended","AdministrativelySuspendedRemote"],H={1:[2,37,58,81,82,233,234,241,242,248,249,250,256,257,279,280],2:[2,3,215,217,256,312,313,314,320,321,322,324,325,326],6:[2,3,37,81,82,216,217,241,246,312,313,314,315,320,321,324,325,326,323,327,332],7:[2,137,256,259,260,293,299],8:[2,3,37,216,217,241,246,256,257,312,313,314,316,320,321,322,323,324,325,326,332]},I=930,J=25,K=25;a.tzConfig=window.tzConfig,a.languages={"en-US":"English",es:"Español","zh-CN":"中文(简体)","zh-TW":"中文(香港)",vt:"Tiếng Việt"},a.selectedLanguage="en-US",a.changeLanguage=function ba(b){w.use(b),a.selectedLanguage=b},window.setSelectedLanguage=function ca(b){a.selectedLanguage=b},document.addEventListener("mouseup",function(b){a.showLanguage=!1});var L=A.bind(void 0,"leftSidebarShowedEventsLimit");a.$root.$on("close.right.inner",L),a.$root.$on("close.left.inner",L),A("showedEventsLimit"),A("leftSidebarShowedEventsLimit");var M;a.$watch(C,function da(b){b?(d.cancel(M),M=d(function(){b>a.leftSidebarShowedEventsLimit?(B("leftSidebarShowedEventsLimit"),B("showedEventsLimit")):d.cancel(M)})):(A("leftSidebarShowedEventsLimit"),A("showedEventsLimit"))}),a.getAllEventsCount=C,E.on("resize orientationchange",function(b){var c=E.width();a.windowWidth=window.calcWidth=c,a.isSmallScreen=I>c,a.$root.$emit("window.resize")}),a.isMobile=!(!bowser.mobile&&!bowser.tablet),a.isSmallScreen=(window.calcWidth||E.width())<I,a.isMobile||a.$watchCollection(function ea(){return{isSmallScreen:a.isSmallScreen,rightSideBarVisible:a.bets.length>0,leftSideBarVisible:!!a.eventOpened.id}},function fa(b,c){b.isSmallScreen!==c.isSmallScreen&&a.$root.$emit("ui.block.toggle.isSmallScreen",b.isSmallScreen),b.rightSideBarVisible!==c.rightSideBarVisible&&a.$root.$emit("ui.block.toggle.rightSideBarVisible",b.rightSideBarVisible),b.leftSideBarVisible!==c.leftSideBarVisible&&a.$root.$emit("ui.block.toggle.leftSideBarVisible",b.leftSideBarVisible)}),a.$root.$on("ui.block.toggle.leftSideBarVisible",function(b,c){c&&q.doWhen(function d(){return!(a.showFullScreenLoader||a.marketsAreaLoading)},function e(){a.eventOpened.id})}),a.tryToRemoveFullScreenLoader=function(){if(a.showFullScreenLoader){var b=0;for(var d in a.fullScreenLoaderDependencies)1==a.fullScreenLoaderDependencies[d]&&b++;b>0?(a.showFullScreenLoader=!0,c(function(){a.tryToRemoveFullScreenLoader()},250)):c(function(){b=0;for(var c in a.fullScreenLoaderDependencies)1==a.fullScreenLoaderDependencies[c]&&b++;1>b&&(a.showFullScreenLoader=!1)},500)}},a.oddsGroupHelper=s,a.domBuilt=!0,a.haveGottenInitialEvents=!1;var N;a.waitForDom=function(){a.domBuilt=!1,c.cancel(N),N=c(function(){console.log("DOM built..."),a.domBuilt=!0})},a.safeApply=function(a){var b=this.$root.$$phase;"$apply"==b||"$digest"==b?a&&"function"==typeof a&&a():this.$apply(a)},a.assets=[],a.addAsset=function(b){var c=document.createElement("img");c.src=b,c.onload=function(){a.safeApply(function(){a.assets=a.assets})},a.assets.push(c)},a.addAsset("assets/icons-sports.png"),a.assetsReady=function(){for(var b,c=0;c<a.assets.length;c++)if(b=a.assets[c],!b.complete||0===b.naturalWidth)return!1;return!0},a.servicesURL=window.servicesURLBase,a.locationHelper=j,a.stateHelper=k,a.pageTitle="Sports Wagering",a.betslips=["General.STRAIGHT_BETS","General.PARLAYS"],a.betslip=0,a.oddsFormat=["General.AMERICAN","General.DECIMAL_EUROPEAN"],a.oddFormat=0,a.fontSizes=["15% smaller","Standard Size","15% larger","30% larger","45% larger"],a.fontSizeValues=[.85,1,1.15,1.3,1.45],a.userFontSizeKey=1,a.oddsMode=["General.PREMATCH","General.LIVE_INPLAY"],a.oddMode=window.theOddMode,a.oddsModeSwitch=window.oddsModeSwitch,a.oddsModeAllowed=1,a.emergency_mode=!1,a.$log=h,a.stake=null,a.toWon=0,a.parlayMinBet=0,a.parlayMaxBet=0,a.accountIDFriendly="",a.accountIDInternal="",a.myLimitFactor=1,a.connection=!0,a.lastMessage=(new Date).getTime(),a.sportOpened={},a.leagueOpened={},a.eventOpened={},a.liveScheduleList={},a.liveScheduleListEST={},a.liveScheduleListFiltered=[],a.liveScheduleListFilteredPage=[],a.liveScheduleListLoading=!0,a.liveScheduleSports={},a.liveEventDatePicker="",a.liveEventSportPreference="",a.historyTransactionsList={},a.historyTransactionsListFiltered=[],a.historyTransactionDetailsList={},a.historyTransactionsDatePicker="",a.historyTransactionDetails=0,a.historyTransactionsRange="7",a.historyTransactionsWagerStatus="all",a.historyTransactionsSortFactor="betcontainertimeprocessed",a.historyTransactionsSortDirection="DESC",a.historyTransactionsShowRebateColumn=!1,a.showPendingTickets=!0,a.historyTransactionsListFilteredForBar=[],a.sports={},a.outcomes={},a.outcomesBySportIDSorted={},a.bets=[],a.loadingSports=!0,a.parlayEnabledBySport={},a.prematchConfirmation=0,a.liveConfirmation=0,a.freeplayCfg=window.freeplayConfig,a.ajaxSports={},a.masterEventsList={},a.marketsByEventID={},a.auxiliarySubscribedEventsFull=[],a.auxiliarySubscribedEventsLST=[],a.lastLiveSportID=-1,a.totalBetslipChanges=0,a.betslipReinitialisePending=!1,a.lastPrematchLeagueID=-1,a.marketsAreaLoading=!1,a.marketClearPendingByEventID=[],a.stake="",a.bookmakerid=13,a.profileid=-999,a.betslipError="",a.betslipLocaleError="",a.blockedMarketIDsByEvent={},a.dataRequestSports={what:"events",frontendID:window.frontendID,sportID:[0],minStartDate:1433057694,maxStartDate:1527752094,preferredOutcomes:"all",isLive:a.oddMode,omit:[],profileID:-999,userID:"-1"},a.animateCount=0,a.nextWSSportsCallback=void 0,a.nextWSLeaguesCallback=void 0,a.nextWSOddsCallback=void 0,a.stateRequestedSportID=-1,a.stateRequestedLeagueID=-1,a.stateRequestedEventID=-1,a.totalStateChanges=0,a.wasStateRedirectBasedOnCookie=!1,a.nextGetLeaguesShouldClear=!1,a.useToWinForMinusLines=window.useToWinForMinusLines,a.marketCountsByEvent={},a.showFullScreenLoader=!1,a.fullScreenLoaderDependencies={},a.showFullScreenLoader=!0,a.fullScreenLoaderDependencies.events=!0;var O=$("#popupBets"),P=!1;a.unbindPopupBets=function(){$("#tableBetsPopupUnbindableCone").html($("#tableBetsPopupUnbindable").html()).show(),$("#tableBetsPopupUnbindable").hide()},a.bindPopupBets=function(){$("#tableBetsPopupUnbindable").show(),$("#tableBetsPopupUnbindableCone").hide()},a.getStructureClassName=function(b){return"rightSidebar"==b?a.bets.length>0?"":"displayNone":"middleContainer"==b?a.bets.length>0?"double":"":"openedEvent"==b?k.params.eventID?" col-md-12 col-lg-12":"col-md-7 col-lg-7":void 0},a.scoreboard=!1,a.scoreboardData={},a.scoreboardDataMinsSecs={},a.scoreboardDataMinsSecsInterval=0,a.getScoreboardTime=function(a,b,c,d,e){a>1&&(a-=3600);var f=(new Date).getTime()/1e3,g=f-parseFloat(a),h=parseInt(b)||0,i=parseInt(c)||0,j=1;d&&(j=-1);var k=0,l=0;e&&a>0&&(1>=g||g>=1)&&(k=g%60,l=Math.floor(g/60)),d&&(l=-1*l,k=-1*k);for(var m=h+l,n=i+k;0>n;)m+=j,n+=60;for(;n>60;)m+=j,n-=60;var o={};return o.mins=parseInt(m),o.secs=parseInt(n)<0?"0"+parseInt(n):parseInt(n),o},a.scoreboardTimeDiff=function(b){if("undefined"==typeof a.scoreboardDataMinsSecs.mins)return a.scoreboardDataMinsSecs=b,!0;var c=60*parseInt(b.mins)+parseInt(b.secs),d=60*parseInt(a.scoreboardDataMinsSecs.mins)+parseInt(a.scoreboardDataMinsSecs.secs);return Math.abs(c-d)>2?(a.scoreboardDataMinsSecs=b,!0):!1},a.updateScoreboardDataMinsSecsBeauty=function(){var b=a.scoreboardDataMinsSecs,c=parseInt(b.mins),d=parseInt(b.secs),e=a.sportOpened,f=e&&e.id;10>c&&(b.mins="0"+c),10>d&&(b.secs="0"+d),("00"==c&&("00"==d||"01"==d)||"10"==f||"7"==f)&&(b.mins=void 0,b.secs=void 0)},a.updateScoreboardDataMinsSecs=function(){var b=a.scoreboardDataMinsSecs,c=b.mins,d=b.secs,e=parseInt(c),f=parseInt(d),g=f+1;c&&(g>=60?(b.mins=e+1,b.secs="00"):b.secs=10>g?"0"+g:g,a.updateScoreboardDataMinsSecsBeauty())},a.getScoreboardDataMinsSecs=function(){return"undefined"!=typeof a.scoreboardDataMinsSecs.mins?a.scoreboardDataMinsSecs.mins+":"+a.scoreboardDataMinsSecs.secs:""},a.getScoreboardData=function(b){if(a.showScoreboard()&&"undefined"!=typeof b){var c=a.leagueOpened[0].sportid;if(a.scoreboardData={sportName:"",team1:"",team2:"",sets:[],setsTotal:[],setsTotalTitle:"",points:[],pointsTitle:"",total:[],totalTitle:"",commentID:0,shortDetails:"",additional:[]},a.scoreboardData.sportName=a.sports[c].name,"undefiend"!=typeof b[14081]&&1==b[14081]?(a.scoreboardData.team2=a.eventOpened.hometeamname,a.scoreboardData.team1=a.eventOpened.awayteamname):(a.scoreboardData.team1=a.eventOpened.hometeamname,a.scoreboardData.team2=a.eventOpened.awayteamname),1==b)return void f.gameCast(a.eventOpened.id);a.scoreboardData.commentID="undefiend"!=typeof b[14050]?b[14050]:0,d.cancel(a.scoreboardDataMinsSecsInterval);var e="",g="",h="";if("undefined"!=typeof l[c]&&(g="undefined"!=typeof b[14050]?b[14050]:0,5==g.length&&(h=parseInt(b[14050].charAt(0)),g=b[14050].substr(1)),"undefined"!=typeof l[c][g]&&(1==h?h=a.scoreboardData.team1:2==h&&(h=a.scoreboardData.team2),e=h+" "+l[c][g].desc)),"1"==c){if(a.scoreboardData.totalTitle="Score",a.scoreboardData.total=[0,0],b[14022]){var i=b[14022].split("-");a.scoreboardData.total=[parseInt(i[0]),parseInt(i[1])]}var j=a.getScoreboardTime(b[14041],b[14043],b[14044],!1,b[14042]);a.scoreboardTimeDiff(j),a.updateScoreboardDataMinsSecsBeauty(),1015!=parseInt(g)&&(a.scoreboardDataMinsSecsInterval=d(a.updateScoreboardDataMinsSecs,1e3)),a.scoreboardData.additional=[],a.scoreboardData.additional.push({title:"corner",t1:0,t2:0}),a.scoreboardData.additional.push({title:"yellow",t1:0,t2:0}),a.scoreboardData.additional.push({title:"red",t1:0,t2:0}),a.scoreboardData.additional.push({title:"penalty",t1:0,t2:0});var k=angular.fromJson(b[14061]);for(var m in k){var n=k[m];if(n.description)switch(n.description){case"ICorner":a.scoreboardData.additional[0].t1=n.team1_data1,a.scoreboardData.additional[0].t2=n.team2_data1;break;case"IYellowCard":a.scoreboardData.additional[1].t1=n.team1_data1,a.scoreboardData.additional[1].t2=n.team2_data1;break;case"IRedCard":a.scoreboardData.additional[2].t1=n.team1_data1,a.scoreboardData.additional[2].t2=n.team2_data1;break;case"IPenalty":a.scoreboardData.additional[3].t1=n.team1_data1,a.scoreboardData.additional[3].t2=n.team2_data1;break;case"IThrowIn":break;case"IFreeKick":break;case"IGoalKick":break;case"IGoal":}}a.scoreboardData.shortDetails=e,a.scoreboardData.image="undefined"!=typeof l[1][g]&&l[1][g].image?1==parseInt(b[14050].charAt(0))?l[1][g].image:l[1][g].image.replace("1-","2-"):"default","ft"==a.scoreboardData.image&&(a.scoreboardData.image="default"),angular.element(".gamecastImageArea img").hide(),angular.element(".gamecastImageArea ."+a.scoreboardData.image).show()}else if("2"==c){a.scoreboardData.totalTitle="Score",a.scoreboardData.total=[0,0];var i=b[14022].split("-");a.scoreboardData.total[0]=parseInt(i[0]),a.scoreboardData.total[1]=parseInt(i[1]),a.scoreboardData.shortDetails=b[14031]+" "+b[14032];var j=a.getScoreboardTime(b[14041],b[14043],b[14044],!1,b[14042]);a.scoreboardTimeDiff(j),a.updateScoreboardDataMinsSecsBeauty()}else if("6"==c){a.scoreboardData.totalTitle="Score",a.scoreboardData.total=[0,0];var i=b[14022].split("-");a.scoreboardData.total[0]=i[0]||"",a.scoreboardData.total[1]=i[1]||"";var j=a.getScoreboardTime(b[14041],b[14043],b[14044],!1,b[14042]);a.scoreboardTimeDiff(j),a.updateScoreboardDataMinsSecsBeauty(),a.scoreboardData.shortDetails=b[14031]+" "+e}else if("7"==c){if(a.scoreboardDataMinsSecs={},a.scoreboardData.pointsTitle="Points",a.scoreboardData.points=[0,0],"undefined"!=typeof b[14013]&&""!=b[14013]&&(a.scoreboardData.points[0]=b[14013]),"undefined"!=typeof b[14014]&&""!=b[14014]&&(a.scoreboardData.points[1]=b[14014]),a.scoreboardData.sets=[["",""],["",""],["",""]],a.scoreboardData.setsTotal=[0,0],"undefined"!=typeof b[14022])for(var o=b[14022].split(","),p=0;p<o.length;p++){var q=o[p].split("-");a.scoreboardData.sets[p]=[q[0],q[1]],(7==q[0]||6==q[0]&&q[1]<5)&&a.scoreboardData.setsTotal[0]++,(7==q[1]||6==q[1]&&q[0]<5)&&a.scoreboardData.setsTotal[1]++}a.scoreboardData.setsTotalTitle="Sets",a.scoreboardData.shortDetails=e}else if("8"==c){a.scoreboardData.totalTitle="Score",a.scoreboardData.total=[0,0];var i=b[14022].split("-");a.scoreboardData.total[0]=i[0]||"",a.scoreboardData.total[1]=i[1]||"";var j=a.getScoreboardTime(b[14041],b[14043],b[14044],!1,b[14042]);a.scoreboardTimeDiff(j),a.updateScoreboardDataMinsSecsBeauty();var r=b[14032]||"";a.scoreboardData.shortDetails=b[14031]+" "+e+" "+r}else if("10"==c){a.scoreboardData.additional=[];var k=angular.fromJson(b[14061]);for(var m in k){var n=k[m];if(n.description)switch(n.description){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"10":case"11":case"12":case"13":case"14":case"15":case"R":case"H":a.scoreboardData.additional.push({title:n.description,t1:n.team1_data1,t2:n.team2_data1})}}a.scoreboardData.shortDetails=e}}},a.showScoreboard=function(){if(!a.leagueOpened[0]||!a.eventOpened.id)return!1;var b=parseInt(a.leagueOpened[0].sportid);return!(1!=a.oddMode||-1==[1,2,6,7,8,10].indexOf(b))},a.subscribedEventsLST=[],a.subscribedEventOdds={},a.lastOddsUpdateTime=0,window.ws=f,a.betslipErrors={line_closed:"The offer you selected is suspended and can not be wagered.",bet_attributes_missing:"The data sent to our system for processing was corrupt or incomplete.  Please try again.",no_lines_found:"You must select at least one offer in order to place a wager.",line_out_of_date:"The price or line for the offer you selected have changed.",no_valid_lines_found:"The data sent to our system for processing contained no valid offers.  Please try again",prematch_not_available:"Prematch betting is not available for this event.",live_not_available:"Live-in-play betting for this event is currently unavailable.",parlay_two_bet_minimum:"Unable to place this parlay: A minimum of two separate bets are required to place a parlay.",parlays_disabled_globally:"Unable to place this parlay: Parlays are currently not allowed in this system.",parlay_same_line_twice:"Unable to place this parlay bet: Your parlay contains the same line more than once.  A given line can only be used one time within the same parlay.",parlay_unauthorized_team_or_sport:"Unable to place this parlay bet: The parlay contains a sport/team that can not be used to place parlays.",parlay_unauthorized_line_type:"Unable to place this parlay: Only moneylines, totals, or spreads are allowed.",parlay_only_one_moneyline:"Unable to place this parlay: Only one moneyline per event is allowed.",parlay_only_one_total:"Unable to place this parlay: Only one total per event is allowed.",parlay_only_one_spread:"Unable to place this parlay: Only one spread per event is allowed.",parlay_moneyline_to_total_restriction:"Parlaying moneylines to totals is not allowed.",parlay_spread_to_total_restriction:"Parlaying spreads to totals is not allowed.",parlay_can_not_verify_football_spread_to_total_ratio:"Parlaying spreads to totals in football must have a 3-1 ratio between the total and the spread.",parlay_correlated_spread_to_total:"Parlays containing spreads and totals for the same game are considered correlated parlays and are not allowed.",parlay_correlated_multiple_moneyline:"Parlays containing multiple moneyline bets for the same game are considered correlated parlays and are not allowed.",parlay_correlated_multiple_spread:"Parlays containing multiple spreads for the same game are considered correlated parlays and are not allowed.",parlay_correlated_multiple_total:"Parlays containing multiple totals for the same game are considered correlated parlays and are not allowed.",parlay_correlated_moneyline_to_spread:"Parlays containing moneylines to spreads in the same game are considered correlated parlays and are not allowed.",api_authenticate_error:"An authentication error occurred.  Please try logging out and then back in to your account",api_authenticate_userid_mismatch:"An authentication error occurred.  Please try logging out and then back in to your account",insufficient_funds:"Your account has insufficient funds available to place this wager.  Please adjust your stake amount and then try again.",error_creating_bet_object:"An unknown error occured when trying to place this wager.  Please try again, or contact customer service for further assistance.",
not_logged_in:"Your session has expired, or you are not logged in.  Please log in and try placing your wager again.",api_bet_rejected:"Your bet was rejected by the backoffice system.  Please contact customer service for further assistance",limit_minimum:"Your bet was rejected because it does not meet the minimum stake amount.",limit_maximum:"Your bet was rejected because it exceeds the maximum allowed stake amount.",limit_per_game:"Your bet was rejected because it exceeds the per-game limit for the selected event.",emergency_mode:"Wagering is currently not available due to system maintenance.  Please try your wagers again later.",unsupported_bet_type:"Unsupported bet type",betMinMax:"Please enter a stake amount that is within the given guidelines.",betAccepted:"Bet has been accepted.",waiting:"Not Yet Submitted",unknown_error:"Unknown error occurred. Please try again."},r.$on("$translateChangeSuccess",function(){for(var b in a.betslipErrors)!function(b){w("Notification."+b).then(function(c){c!==b&&(a.betslipErrors[b]=c)})}(b)}),a.betslipError="",a.connect=function(){f.connect(function(b){b?(console.log("WS Connected (2)"),a.connection=!0):(a.connection=!1,a.safeApply(function(){return!0}),c(function(){a.connection||a.connect()},500))})},a.getSportsWSInterval=0,a.getSportsWSIsRunning=!1,a.getSportsWS=function(b,c){a.getSportsWSIsRunning||(a.getSportsWSIsRunning=!0,a.showFullScreenLoader=!0,a.fullScreenLoaderDependencies.events=!0,a.tryToRemoveFullScreenLoader(),console.log("getSportsWS() is running"),"undefined"!=typeof b&&b||(a.sportOpened={},a.leagueOpened={},a.eventOpened={},a.sports={},a.outcomes={},a.outcomesBySportIDSorted={},a.loadingSports=!0),"function"==typeof c&&(a.nextWSSportsCallback=c),f.sports(a.dataRequestSports),a.getSportsWSInterval||(a.getSportsWSInterval=d(function(){f.sports(a.dataRequestSports)},62e3)))},a.getSports=function(){return console.log("getSports() is running"),b.get("assets/sports.json").success(function(b){a.ajaxSports=b,0==a.bets&&a.loadBetslipFromCookie()})},a.getMarketCounts=function(){console.log("Getting market counts"),f.marketCounts()},d(function(){var b=(new Date).getTime()/1e3,c=[];for(var d in a.marketCountsByEvent){var e=a.marketCountsByEvent[d];b-e.lastupdate>900&&b-e.lastupdatedb>900&&(c.push(d),console.log(b+" deleting "+d+" from marketCounts due to expiry"))}c.forEach(function(b){delete a.marketCountsByEvent[b]})},1e4),a.connect(),a.$on("onReconnect",function(){window.ws=f,a.connect()}),a.removeOddsEntryFromOddsByOutcomeIDStructure=function(a,b){if(a&&a[b.outcomeid]){for(var c=a[b.outcomeid].data,d=c.length-1;d>=0;d--){var e=c[d];e.externaloddsid==b.externaloddsid&&c.splice(d,1)}a[b.outcomeid].data.length<1&&delete a[b.outcomeid]}},a.createPlaceholderMarketIfNoOddsExistInThisMarket=function(b,c,d,e){var f=a.masterEventsList[b];if(f&&f.sportid){var g=f.sportid,h=parseInt(c);if(t[g]){var i=f.hometeamname||"",j=f.awayteamname||"";if(f.right_hand_team&&1==f.right_hand_team&&(i=f.awayteamname||"",j=f.hometeamname||""),d[b]&&d[b][e]&&d[b][e][c]){for(var k in d[b][e][c].entries){var l=d[b][e][c].entries[k];for(var m in l){var n=l[m];if(n.entity){var p=n.entity;if(p.status&&("Open"==p.status||"TemporarilySuspended"==p.status))return;delete n.entity,console.log("Deleting invalid entity from column "+m+" row "+k+" outcomeid/eventID "+c+"/"+b)}l[m]||delete l[m]}d[b][e][c].entries[k]||delete d[b][e][c].entries[k]}console.log("Deleting empty 'shell' container for "+b+"/"+c),delete d[b][e][c]}var q=t[g];if(!(q.indexOf(h)<0)){var r=u,s={};if(r[g.toString()])s=r[g.toString()];else{if(!r.DEFAULT)return;s=r.DEFAULT}if(s[c]){var v=s[c],w=[];v.forEach(function(a){var b=a.replace("{T1}",i);b=b.replace("{T2}",j);var c={externaloddsid:1,sportid:g,status:"TemporarilySuspended",bet:b,display:b,display_html:o.trustAsHtml(b)};w.push(c)});var x={display:!0,lst:!0,ui_order:1,sportid:g,maxCC:"countMaxColumn"+w.length,maxRC:1,entries:{1:{}},outcomeid:c.toString(),deleteIfOverrideArrives:!0},y=0;w.forEach(function(a){a.externaloddsid=z();var b=y+1;x.entries[1][b]={id:a.externaloddsid,placeholder:!1,entity:a},y++}),d[b]||(d[b]={}),d[b][e]||(d[b][e]={}),d[b][e][c]=x}}}}},a.initialiseMarketRowsAndColumnsBasedUponTouchedKeys=function(b,c){for(var d in b)if(b.hasOwnProperty(d)){var e=b[d];for(var f in e)if(e.hasOwnProperty(f)){var g=e[f];for(var h in g)if(g.hasOwnProperty(h)){var i={},j=0,k=0,l={};c||(c={}),c[d]||(c[d]={}),c[d][f]||(c[d][f]={}),c[d][f][h]||(c[d][f][h]={});var m=c[d][f][h];m.entriesByExternalOddsID={},m.entries={};var n=a.masterEventsList[d];if(!(n&&n.odds&&n.odds[h]&&n.odds[h].data)){a.createPlaceholderMarketIfNoOddsExistInThisMarket(d,h,c,f);break}var o=!1;angular.forEach(n.odds[h].data,function(b){if("Open"==b.status||"TemporarilySuspended"==b.status){var c=b.column||0,d=b.row||0;if(l[b.externaloddsid]=b,i[c]||(i[c]=[]),-171717==d||-171718==d){var e=c;o=!0,c=0,i[c]||(i[c]=[]),("undefined"==typeof b.colT||b.colT==e)&&(b.colT=e,a.oddMode==b.islive&&i[c].push(b))}else a.oddMode==b.islive&&i[c].push(b)}});var p=1,q=1;o&&(i[p]=[],i[0]&&(i[0].sort(function(a,b){var c=parseInt(a.colT),d=parseInt(b.colT);return d>c?-1:c>d?1:0}),i[0].forEach(function(b){var c=b.externaloddsid,d=l[c];c&&d&&(i[p]||(i[p]=[]),d.rowT=d.row+q+p,a.oddMode==b.islive&&(i[p].push(d),p++,p>3&&(p=1,q++)))}),delete i[0]));for(var r in i)if(i.hasOwnProperty(r))if(i[r].length<1)delete i[r];else{i[r].sort(o?function(a,b){return a.rowT<b.rowT?-1:a.rowT>b.rowT?1:0}:function(a,b){return a.row<b.row?-1:a.row>b.row?1:0});var s=0;i[r].forEach(function(a){s+1>j&&(j=s+1),s++}),k++}m.maxRC=j,m.maxCC="countMaxColumn"+k,m.entries={},m.outcomeid=h,m.sportid=-1,m.lst=!1,m.display=!1;for(var t=0,u=0,v=0,w=0,x=0,y=0;j>y;++y){m.entries[y+1e5]={};for(r in i)i.hasOwnProperty(r)&&(i[r][y]?(i[r][y].storage_row=y+1e5,i[r][y].storage_col=r,m.display=!0,m.lst=i[r][y].lst,m.sportid=i[r][y].sportid,m.entries[y+1e5][r]={id:i[r][y].externaloddsid,placeholder:!1,entity:i[r][y]},i[r][y].status===G[1]&&++v,x++):(m.entries[y+1e5][r]={id:-1,placeholder:!0},++w)),++t;u+=v,Object.keys(m.entries[y+1e5]).length==v+w&&delete m.entries[y+1e5],v=w=0}1>x&&delete c[d][f][h],a.createPlaceholderMarketIfNoOddsExistInThisMarket(d,h,c,f)}}}a.marketsByEventID=c},a.sortEvents=function(){var b=[];a.leagueOpened&&"function"==typeof a.leagueOpened.forEach&&(a.leagueOpened.forEach(function(c){var d=c.eventsarray||[],e=[];if(c.events){var f=function(b){var d=0;if(a.masterEventsList[b].odds)for(var e in a.masterEventsList[b].odds){if(1===d)break;if(a.masterEventsList[b].odds[e]&&a.masterEventsList[b].odds[e].data)for(var f=a.masterEventsList[b].odds[e].data,g=0;g<f.length;g++){var h=f[g];if(h.currentprice&&h.status&&("Open"==h.status||"TemporarilySuspended"==h.status)){d=1;break}}}if(0===d){var i=(new Date).getTime()/1e3;if(a.marketCountsByEvent&&a.marketCountsByEvent[b]){var j=a.marketCountsByEvent[b];(i-j.lastupdate<30||i-j.lastupdatedb<30)&&(c.events[b].hasOdds=1)}}return d};for(var g in c.events)c.events[g].hasOdds=f(g),e.push(c.events[g]);if(e.sort(sort_by({name:"hasOdds",primer:parseInt,reverse:!0},{name:"startdate",primer:parseInt,reverse:!1},"awayteamname")),!d)return b.push({leagueid:c.id,arr:e}),void console.log("OldEventArray does not exist at all.");if(d.length!=e.length)return console.log("oldEventArray length of "+d.length+" != new array of "+e.length),void b.push({leagueid:c.id,arr:e});for(var h=!1,i=0;i<e.length;i++){var j=e[i],k=i;if(j.id!=d[k].id){console.log("Position hange detected at index "+k+"; old hometeam was "+d[k].hometeamname+"; new is "+j.hometeamname),h=!0;break}if(j.id==d[k].id&&j.hasOdds!=d[k].hasOdds){console.log("Change in 'hasOdds' at index "+k+"; hometeam is "+d[k].hometeamname),h=!0;break}}return h?void b.push({leagueid:c.id,arr:e}):void 0}}),console.log("Changes from sortEvents: "),console.log(b),b.forEach(function(b){a.leagueOpened.forEach(function(a){a.id==b.leagueid&&(a.eventsarray=b.arr)})}),a.leagueOpened.forEach(function(b,c){a.waitForDom();var d=function(){document.querySelectorAll(".games-list")[c]&&a.domBuilt?x(b,c):setTimeout(d,10)};d()}),b&&b.length&&(a.showFullScreenLoader=!0,a.fullScreenLoaderDependencies.sorting=!0,a.tryToRemoveFullScreenLoader(),a.fullScreenLoaderDependencies.sorting=!1))},a.deletePlaceholdersForMarket=function(b,c,d){if(a.marketsByEventID[b]&&a.marketsByEventID[c]&&a.marketsByEventID[c][d]){var e=a.marketsByEventID[c][d];e.deleteIfOverrideArrives&&delete a.marketsByEventID[c][d]}};var Q=function(b){if("bridge_reconnected"==b)return console.log("Reconnected message received; re-pulling all statics..."),a.getSportsWS(),a.getSports(),a.getMarketCounts(),void a.getLiveSchedule();var c=b.command;if("pong"==c)a.lastMessage=(new Date).getTime();else if("post"==c)if("event"===b.type){angular.forEach(b.data.events_filtered,function(b){b.true_right_hand_team_name=1==b.right_hand_team?b.hometeamname:b.awayteamname,b.true_left_hand_team_name=1==b.right_hand_team?b.awayteamname:b.hometeamname,b.team_separator_parsed=a.getEventSeparatorCharacter(b.separator_symbol);var c=b.id||"-1";a.masterEventsList[c]||(b.lstSubscribed=!1,a.masterEventsList[c]=b)});for(var d in a.masterEventsList){var e=!1,g=-1;if(angular.forEach(b.data.events_filtered,function(a){a.id==d&&(e=!0,g=a.sportid)}),!e){if(delete a.masterEventsList[d],angular.forEach(a.leagueOpened,function(a){for(var b in a.events)b==d&&delete a.events.prop}),a.sportOpened&&a.sportOpened.events)for(var h in a.sportOpened.events)h==d&&delete a.sportOpened.events.evtID;var i="lst_"+d+"_"+a.bookmakerid+"_"+a.profileid;a.auxiliarySubscribedEventsLST.indexOf(d)<0&&a.auxiliarySubscribedEventsFull.indexOf(d)<0&&f.unSubscribe(i),a.subscribedEventsLST.indexOf(d)>=0&&a.subscribedEventsLST.splice(a.subscribedEventsLST.indexOf(d),1)}if(e&&t&&t[g]){var j=t[g];j.forEach(function(b){var c=b.toString();a.createPlaceholderMarketIfNoOddsExistInThisMarket(s,b,p,"0"),a.createPlaceholderMarketIfNoOddsExistInThisMarket(s,b,p,"1")})}}angular.equals({},a.ajaxSports)?a.getSports().then(function(){a.drawSports(b)}):a.drawSports(b),1==a.betslipReinitialisePending&&a.loadBetslipFromCookie(),a.sortEvents(),a.haveGottenInitialEvents=!0,a.fullScreenLoaderDependencies.events=!1,a.tryToRemoveFullScreenLoader(),a.waitForDom(),a.loadingSports=!1,a.updatePageTitleBasedOnState(),a.getSportsWSIsRunning=!1}else if("odds"===b.type){a.animateCount++;var k=[];b.data&&b.data.length&&b.data.forEach(function(b){var c={},d=m(b,c);a.masterEventsList[d.eventid]&&(c=a.masterEventsList[d.eventid]),d.true_right_hand_team_name=c.true_right_hand_team_name,d.true_left_hand_team_name=c.true_left_hand_team_name,d.team_separator_parsed=c.team_separator_parsed,k.push(d)});var l={},n={},p=a.marketsByEventID;angular.forEach(a.leagueOpened,function(b){angular.forEach(b.events,function(b){angular.forEach(k,function(b,c){function d(b){q.group("odd.classname.reset.{}".format(a.animateCount),5500,function c(){b.className="noAnimate"})}if(this.id==b.eventid&&b.islive==a.oddMode){if(l[b.eventid]=!0,this.odds||(this.odds={}),this.odds.hasOwnProperty(b.outcomeid)){a.deletePlaceholdersForMarket(b.eventid,b.islive,b.outcomeid);var e=-1;angular.forEach(this.odds[b.outcomeid].data,function(a,c){a.externaloddsid==b.externaloddsid&&(e=c)}),-1!=e?(b.currentprice<this.odds[b.outcomeid].data[e].currentprice?(b.className="animateDown{}".format(a.animateCount%2),d(b)):b.currentprice>this.odds[b.outcomeid].data[e].currentprice&&(b.className="animateUp{}".format(a.animateCount%2),d(b)),function(a,c){var d=document.getElementById(b.externaloddsid);d&&(y(d,b),setTimeout(function(){b.className="noAnimate",y(d,b)},5500))}(b),-1==G.indexOf(b.status)&&"Open"!=b.status?this.odds[b.outcomeid].data.splice(e,1):""!=b.price_american&&""!=b.display&&(this.odds[b.outcomeid].data[e]=b)):(-1!=G.indexOf(b.status)||"Open"==b.status)&&""!=b.price_american&&""!=b.display&&b.islive==a.oddMode&&this.odds[b.outcomeid].data.push(b)}else(-1!=G.indexOf(b.status)||"Open"==b.status)&&""!=b.price_american&&""!=b.display&&(this.odds[b.outcomeid]={data:[b],column:null,lst:b.lst});if(n[b.eventid]||(n[b.eventid]={}),n[b.eventid][b.islive]||(n[b.eventid][b.islive]={}),n[b.eventid][b.islive][b.outcomeid]=!0,p[b.eventid]||(p[b.eventid]={}),p[b.eventid][b.islive]||(p[b.eventid][b.islive]={}),p[b.eventid][b.islive][b.outcomeid]={display:!1,count:0,entries:{},entriesByExternalOddsID:{},asArray:[]},"Open"!=b.status&&-1==G.indexOf(b.status)){if(a.masterEventsList[b.eventid]&&a.masterEventsList[b.eventid].odds&&a.masterEventsList[b.eventid].odds[b.outcomeid]&&a.masterEventsList[b.eventid].odds[b.outcomeid].data){var f=a.masterEventsList[b.eventid].odds;a.removeOddsEntryFromOddsByOutcomeIDStructure(f,b)}if(a.eventOpened&&a.eventOpened.odds&&a.eventOpened.odds[b.outcomeid]&&a.eventOpened.odds[b.outcomeid]&&a.eventOpened.odds[b.outcomeid].data){var f=a.eventOpened.odds;a.removeOddsEntryFromOddsByOutcomeIDStructure(f,b)}angular.forEach(a.leagueOpened,function(c){if(c.events&&c.events[b.eventid]&&c.events[b.eventid].odds&&c.events[b.eventid].odds[b.outcomeid]&&c.events[b.eventid].odds[b.outcomeid].data){var d=c.events[b.eventid].odds;a.removeOddsEntryFromOddsByOutcomeIDStructure(d,b)}})}a.checkAndRemoveOddFromBets(b)}},b),angular.forEach(b.odds,function(a){a.data.sort(function(a,b){return a.row-b.row||a.column-b.column})})})});var r={};angular.forEach(k,function(b){if(b.display_html=o.trustAsHtml(b.display),H[b.sportid]&&H[b.sportid].indexOf(b.outcomeid)>-1){var c=b.display.split(" ");c.push('<span class="hc">'+c.pop()+"</span>"),b.display_html=o.trustAsHtml(c.join(" "))}if(n[b.eventid]||(n[b.eventid]={}),n[b.eventid][b.islive]||(n[b.eventid][b.islive]={}),n[b.eventid][b.islive][b.outcomeid]=!0,a.marketClearPendingByEventID.indexOf(b.eventid)>=0){var d=a.marketClearPendingByEventID.indexOf(b.eventid);a.marketClearPendingByEventID.splice(d,1),console.log("Master event obj odds cleared for "+b.eventid),a.marketsByEventID[b.eventid]={},a.masterEventsList[b.eventid]&&(a.masterEventsList[b.eventid].odds={}),a.eventOpened&&a.eventOpened.id==b.eventid&&(a.eventOpened.odds={}),a.leagueOpened.forEach(function(a){if(a.events)for(var c in a.events)c==b.eventid&&(a.events[c].odds={})})}if(a.masterEventsList[b.eventid]){var e=a.masterEventsList[b.eventid];p[b.eventid]||(p[b.eventid]={}),p[b.eventid][b.islive]||(p[b.eventid][b.islive]={}),p[b.eventid][b.islive][b.outcomeid]||(p[b.eventid][b.islive][b.outcomeid]={}),p[b.eventid][b.islive][b.outcomeid]={display:!1,count:0,entries:{},entriesByExternalOddsID:{},asArray:[]},e.odds||(e.odds={}),e.odds[b.outcomeid]||(e.odds[b.outcomeid]={data:[],column:null,lst:b.lst});var f=-1;angular.forEach(e.odds[b.outcomeid].data,function(a,c){a.externaloddsid==b.externaloddsid&&(f=c)}),f>=0?"Open"==b.status||-1!=G.indexOf(b.status)?e.odds[b.outcomeid].data[f]=b:e.odds[b.outcomeid].data.splice(f,1):e.odds[b.outcomeid].data.push(b),r[b.eventid]=!0,a.checkAndRemoveOddFromBets(b),P||a.updateBetsChangesDuringPopup()}});for(var s in r){var u=r[s];angular.forEach(u.odds,function(a){a.data.sort(function(a,b){return a.row-b.row||a.column-b.column})})}a.initialiseMarketRowsAndColumnsBasedUponTouchedKeys(n,p);for(var s in a.masterEventsList){var w=a.masterEventsList[s],x=w.sportid.toString();if(t[x]){var j=t[x];j.forEach(function(b){var c=b.toString();a.createPlaceholderMarketIfNoOddsExistInThisMarket(s,b,p,"0"),a.createPlaceholderMarketIfNoOddsExistInThisMarket(s,b,p,"1")})}}a.fullScreenLoaderDependencies.odds=!1,a.tryToRemoveFullScreenLoader(),"function"==typeof a.nextWSOddsCallback&&(a.nextWSOddsCallback(),a.nextWSOddsCallback=void 0)}else if("frontend"===b.type){var z=b.key.split("outcome")[1];a.outcomes[z]=b.data,a.outcomesBySportIDSorted[z]={},a.outcomesBySportIDSorted[z][0]=[],a.outcomesBySportIDSorted[z][1]=[];for(var A in b.data){if(!b.data[A])break;var B=b.data[A];for(var C in B){var D=B[C],E=D;E.outcomeid=A,"0"==C?a.outcomesBySportIDSorted[z][0].push(E):a.outcomesBySportIDSorted[z][1].push(E)}}var F=function(a,b){return a.order<b.order?-1:a.order>b.order?1:0};a.outcomesBySportIDSorted[z][0].sort(function(a,b){return F(a,b)}),a.outcomesBySportIDSorted[z][1].sort(function(a,b){return F(a,b)})}else if("liveschedule"===b.type){a.liveScheduleListLoading=!1,a.liveScheduleList=angular.fromJson(b.data);var I={},J=0;angular.forEach(a.liveScheduleList,function(b,c){a.isMobile&&4==J||~~moment(c).utc().diff(moment(),"day")<0||(angular.forEach(b,function(b,c){var d=a.tzConfig.zone||"America/New_York",e=moment.utc(1e3*b.eventTimeParsed).tz(d).format("YYYY-MM-DD");~~moment(e).diff(moment(),"day")<0||(I[e]||(I[e]=[]),I[e][c]=b)}),J++)}),a.liveScheduleListEST=I;var K={};angular.forEach(I,function(b){b.sort(function(a,b){return~~a.eventTimeParsed>~~b.eventTimeParsed?1:~~a.eventTimeParsed<~~b.eventTimeParsed?-1:0}),angular.forEach(b,function(b,c){"undefined"==typeof K[parseInt(b.sportid)]&&(K[parseInt(b.sportid)]=b.sportName),a.liveScheduleListFiltered.push(b)})}),a.liveScheduleSports=K,a.liveEventDatePicker=a.liveEventDatePicker||Object.keys(a.liveScheduleListEST)[0],a.doFilterLiveEventsSchedule()}else if("gamecast"===b.type){var L=angular.fromJson(b.data);a.getScoreboardData(L[0])}else if("limitChangePullRequest"==b.type)a.getSportsWS(!0);else if("limits"==b.type){var M=b.key;if("parlay"==M)if(b.data&&b.data.items&&b.data.items.length){var N=b.data.items[0],O=N.max/100;a.myLimitFactor>0&&(O*=a.myLimitFactor);var Q=N.min/100;Q>O&&(Q=O),a.parlayMinBet=parseInt(100*Q)/100,a.parlayMaxBet=parseInt(100*O)/100}else console.log("Parlay Limit received but mal-formed response: "),console.log(b);else b.data&&b.data.items&&b.data.items.length?angular.forEach(b.data.items,function(b){var c=b.max;a.myLimitFactor>0&&(c=Math.floor(c*a.myLimitFactor+.5)),"undefined"!=typeof b.reduction&&(c-=b.reduction);var d=c/100;.01>d&&(d=0);var e=b.min/100;e>d&&(e=d);for(var f=a.bets.length;f--;)a.bets[f].externaloddsid==b.id&&(a.bets[f].minBet=parseInt(100*e)/100,a.bets[f].maxBet=parseInt(100*d)/100)}):(console.log("Straight Limit received but mal-formed response: "),console.log(b))}else if("mcu"==b.type||"mco"==b.type||"mcc"==b.type){var R=b.data,S=R.split("~"),T={};if(S.forEach(function(a){var b=a.split("|");if(b.length>=5){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=new v(c,d,e,f,g);T[c]=h}}),"mco"==b.type)for(var U in T)delete a.marketCountsByEvent[U];else if("mcu"==b.type||"mcc"==b.type)for(var U in T)a.marketCountsByEvent[U]?(a.marketCountsByEvent[U]&&(a.marketCountsByEvent[U].openMarkets!=T[U].openMarkets||a.marketCountsByEvent[U].temporarilySuspendedMarkets!=T[U].temporarilySuspendedMarkets)&&(a.marketCountsByEvent[U]=T[U]),a.marketCountsByEvent[U]=T[U]):a.marketCountsByEvent[U]=T[U]}a.$applyAsync()};f.watch(Q),a.checkAndRemoveOddFromBets=function(b){for(var c=a.bets.length;c--;)a.bets[c].externaloddsid==b.externaloddsid&&(b.price_american&&(a.bets[c].price_american!=b.price_american||-1==G.indexOf(b.status)&&"Open"!=b.status||b.status!=a.bets[c].statusOdd)&&(0==a.acceptBetsProcessing&&(a.bets[c].price_american_old=a.bets[c].price_american,a.bets[c].currentprice_old=a.bets[c].currentprice,a.bets[c].price_american=b.price_american,a.bets[c].currentprice=b.currentprice,a.bets[c].market_price=b.market_price.toString()),a.bets[c].statusOdd=b.status,"Open"==b.status&&a.getOddsMinMax(b)),"Open"!=b.status&&(a.bets[c].minBet=0,a.bets[c].maxBet=0))},a.getFreshOdd=function(a,b){return 0==b?"undefined"!=typeof a.price_american_new?a.price_american_new:a.price_american:"undefined"!=typeof a.currentprice_new?a.currentprice_new:a.currentprice},a.replaceOddsGroupTitleNumberSuffix=function(a){var b=a.substr(a.length-1),c="";return"1"==a?c="st":"2"==a?c="nd":"3"==a?c="rd":"11"==a||"12"==a||"13"==a?c="th":"1"==b?c="st":"2"==b?c="nd":"3"==b?c="rd":("4"==b||"5"==b||"6"==b||"7"==b||"8"==b||"9"==b||"0"==b)&&(c="th"),c},a.replaceOddsGroupTitle=function(b,c){if("undefined"!=typeof c&&c.round_data){var d=c.round_data.split("|");d.length>=2&&(-1!=b.indexOf("{X}")&&(b=b.replace("{X}",d[0])),-1!=b.indexOf("{X0}")&&(b=b.replace("{X0}",d[0]+a.replaceOddsGroupTitleNumberSuffix(d[0]))),-1!=b.indexOf("{Y}")&&(b=b.replace("{Y}",d[1])),-1!=b.indexOf("{Y0}")&&(b=b.replace("{Y0}",d[1]+a.replaceOddsGroupTitleNumberSuffix(d[1]))),"AWAYTEAM"==d[1]||"undefined"!=typeof d[2]&&"AWAYTEAM"==d[2]?-1!=b.indexOf("{TEAM}")&&(b=b.replace("{TEAM}",c.awayteamname)):("HOMETEAM"==d[1]||"undefined"!=typeof d[2]&&"HOMETEAM"==d[2])&&-1!=b.indexOf("{TEAM}")&&(b=b.replace("{TEAM}",c.hometeamname)))}else"undefined"!=typeof b&&(-1!=b.indexOf("{HOME}")&&(b=b.replace("{HOME}",c.hometeamname)),-1!=b.indexOf("{AWAY}")&&(b=b.replace("{AWAY}",c.awayteamname)));return b},d(function(){var b=(new Date).getTime();(b-a.lastMessage)/1e3>40&&f.ping()},2e3),d(function(){var b=(new Date).getTime();(b-a.lastMessage)/1e3>90&&a.reload()},5e3),a.drawSports=function(b){b.data.leagues_filtered.sort(function(a,b){return a.startdate==b.startdate?a.awayteamname<b.awayteamname?-1:a.awayteamname>b.awayteamname?1:0:a.startdate<b.startdate?-1:1});var c=0,d=!1,e=!1;"undefined"!=typeof a.eventOpened.id&&(c=a.eventOpened.id),angular.forEach(a.ajaxSports,function(g){if(-1!=b.data.sportids_filtered.indexOf(g.id)){var h={};angular.forEach(b.data.leagues_filtered,function(f){f.sportid==g.id&&("undefined"==typeof f.events&&(f.events={}),angular.forEach(b.data.events_filtered,function(b){if(b.leagueid==f.id&&(f.events[b.id]=b.id==c?a.eventOpened:b),b.id==c&&(d=!0),a.ifEventBlocked(b))b.id==c&&(console.log("Selecting next..."),e=!0),a.removeBetByEventID(b.id);else if(e){console.log("Next found!");var g=a.sports[b.sportid];a.getLeaguesWrapper(g.name),a.getOddsWrapper(g.name,b.leagueid,b.id),e=!1}}),h[f.id]=f)}),g.leagues=h,this[g.id]=g,"undefined"==typeof a.outcomes[g.id]&&f.outcome(g.id)}"undefined"!=typeof b.data.outcomeids_blocked&&(a.blockedMarketIDsByEvent={},angular.forEach(b.data.outcomeids_blocked,function(b){if("undefined"!=typeof b.eventid&&"undefined"!=typeof b.outcomeid){var c=b.eventid.toString(),d=b.outcomeid.toString();a.blockedMarketIDsByEvent[c]||(a.blockedMarketIDsByEvent[c]=[]),a.blockedMarketIDsByEvent[c].push(d)}}))},a.sports),e&&console.log("Failed to select next event!"),a.sportCount=b.data.sportids_filtered.length;for(var g in a.sports)if(a.sports.hasOwnProperty(g)){var h=parseInt(g);b.data.sportids_filtered.indexOf(h)<0&&delete a.sports[g]}var i=[],j=-1;angular.forEach(a.leagueOpened,function(b){j++,a.sports[b.sportid]&&a.sports[b.sportid].leagues[b.id]||i.indexOf(j)<0&&i.push(j)});var k=[];j=-1;var l=[];if(angular.forEach(a.leagueOpened,function(b){if(j++,i.indexOf(j)<0){var c={},d,e=a.sports[b.sportid];if(e&&e.leagues&&e.leagues[b.id]&&e.leagues[b.id].events){d=e.leagues[b.id].events;for(var f in d)d.hasOwnProperty(f)&&(c[f]=d[f],b.events[f]&&b.events[f].odds&&(c[f].odds=b.events[f].odds),b.events[f]||(console.log("EventID "+f+" is new - found during leagueopened crosscheck."),l.indexOf(f)<0&&l.push(f)))}b.events=c,k.push(b)}}),1==a.oddMode){var m=-1,n={},o,p,q,r;a.sportOpened&&a.sportOpened.id&&(m=a.sportOpened.id),a.sports[m]&&a.sports[m].leagues&&(n=a.sports[m].leagues);for(var s in n)if(n.hasOwnProperty(s)){o=n[s],p=o.id,q=!1;for(var t=0,u=k.length;u>t;++t)if(k[t].id==p){q=!0;break}if(!q&&(k.push(o),r=a.sports[o.sportid],r&&r.leagues&&r.leagues[p]&&r.leagues[p].events)){var v=r.leagues[p].events;for(var w in v)v.hasOwnProperty(w)&&l.indexOf(w)<0&&l.push(w)}}}k.sort(function(a,b){return a.ui_sort>b.ui_sort?1:a.ui_sort<b.ui_sort?-1:0}),a.leagueOpened=k,l.forEach(function(b){a.subscribedEventsLST.indexOf(b)<0&&a.subscribedEventsLST.push(b),f.subscribe("lst_"+b+"_"+a.bookmakerid+"_"+a.profileid)});var x=[];if(l.length>0&&(angular.forEach(l,function(a){x.push(a.toString())}),f.odds(x,!0)),!d&&c&&(a.eventOpened={}),1==a.betslipKeyChanges){if(0==a.oddMode){if(a.objectLength(a.leagueOpened)>0)return a.getEvents(a.leagueOpened[0])}else if(!angular.equals({},a.mobileSportOpened))return a.getEvents(a.mobileSportOpened);a.betslipKeyChanges=0}angular.forEach(a.leagueOpened,function(b){angular.forEach(b.events,function(c){"undefined"==typeof a.sports[b.sportid]?c.status="deleted":"undefiend"==typeof a.sports[b.sportid].leagues[b.id]?c.status="deleted":"undefined"==typeof a.sports[b.sportid].leagues[b.id].events[c.id]&&(c.status="deleted")})}),"function"==typeof a.nextWSSportsCallback&&(a.nextWSSportsCallback(),a.nextWSSportsCallback=void 0)},a.getStatic=function(){b.get(a.servicesURL+"static.php").success(function(b){b&&"undefined"!=typeof b.parlay_meta&&(a.parlayEnabledBySport=b.parlay_meta),b&&"undefined"!=typeof b.prematchConfirmation&&(a.prematchConfirmation=b.prematchConfirmation),b&&"undefined"!=typeof b.liveConfirmation&&(a.liveConfirmation=b.liveConfirmation)})},a.getStatic(),a.canParlayOutcome=function(b,c){if(0==a.betslip)return!0;var d=b.toString(),e=c.toString(),f=a.parlayEnabledBySport[d];return!!(f&&f.indexOf(e)>=0)},a.mobileSportOpened={};var R=a.cachedOdds={};a.$root.$on("send.get",function(b,c){c.data&&"odds"==c.data.what&&(R[a.sportOpened.name]=!1)}),a.$root.$on("receive.post",function(b,c){"odds"==c.type&&(R[a.sportOpened.name]=!0)}),a.getLeaguesWrapper=function(b,c){if("undefined"===a.shouldReloadState&&(a.shouldReloadState=!0),a.waitForDom(),a.nextGetLeaguesShouldClear=!0,A(),1===a.oddMode)k.go("liveWithSport",{sportName:b},{reload:!0});else{var d=a.sports;for(var e in d)if(d.hasOwnProperty(e)){var f=d[e];if(f.name==b){var g=!1,h=f.leagues;for(var i in h)if(h.hasOwnProperty(i)){var j=f.leagues[i];(!g||j.ui_sort<g.ui_sort)&&(console.log(j.ui_sort),g=j)}if(a.shouldReloadState&&g)return void a.getEventsWrapper(f.name,g.id)}}a.shouldReloadState&&k.go("prematchWithSport",{sportName:b},{reload:!0})}a.shouldReloadState=!0},a.getLeagues=function(b,c,d){0==a.oddMode?a.sportOpened&&c.id==a.sportOpened.id?a.sportOpened=null:(a.leagueOpened=[],a.sportOpened=c):(a.mobileSportOpened=c,a.sportOpened=c,a.getEvents(c)),a.setMaxHeight(),a.mobileSportOpened=c,a.sportOpened=c,"function"==typeof d&&d(),"function"==typeof a.nextWSLeaguesCallback&&(a.nextWSLeaguesCallback(),a.nextWSLeaguesCallback=void 0)},a.getEventsWrapper=function(b,c){a.waitForDom(),a.shouldReloadState=!1,1===a.oddMode?k.go("liveWithSport",{sportName:b},{reload:!0}):k.go("prematchWithSportAndLeague",{sportName:b,leagueID:c},{reload:!0})},a.getEventsPending=!1,a.getEvents=function(b,c,d){if(!a.getEventsPending&&!a.getSportsWSIsRunning){a.getEventsPending=!0,console.log("getEvents called; banner raised.");var e=!1;a.isMobile&&a.betSlipActive&&(e=!0);var g=[],h=function(b,c){var d=!1;for(var e in a.masterEventsList)e==b.id&&a.masterEventsList[e].lstSubscribed&&(d=!0);if(!d){c.indexOf(b.id)<0&&c.push(b.id);var h="lst_"+b.id+"_"+a.bookmakerid+"_"+a.profileid;f.subscribe(h),g.push(b.id),a.masterEventsList[b.id].lstSubscribed=!0}};if(0==a.oddMode){if(a.leagueOpened=[b],angular.forEach(b.events,function(a){h(a,this)},a.subscribedEventsLST),a.lastPrematchLeagueID!=b.id)for(var i in a.masterEventsList){var j=a.masterEventsList[i];j.leagueid!=b.id&&j.lstSubscribed&&(a.auxiliarySubscribedEventsLST.indexOf(i)<0&&a.auxiliarySubscribedEventsFull.indexOf(i)<0&&f.unSubscribe("lst_"+i+"_"+a.bookmakerid+"_"+a.profileid),j.lstSubscribed=!1,a.subscribedEventsLST.indexOf(j.id)>=0&&a.subscribedEventsLST.splice(a.subscribedEventsLST.indexOf(j.id),1))}}else{var k=[];if(angular.forEach(b.leagues,function(b){k.push(b);var c=a.subscribedEventsLST,d=b.events;for(var e in d)d.hasOwnProperty(e)&&h(d[e],c)}),a.leagueOpened=k,a.lastLiveSportID!=b.id)for(var i in a.masterEventsList){var j=a.masterEventsList[i];j.sportid!=b.id&&j.lstSubscribed&&(a.auxiliarySubscribedEventsLST.indexOf(i)<0&&a.auxiliarySubscribedEventsFull.indexOf(i)<0&&f.unSubscribe("lst_"+i+"_"+a.bookmakerid+"_"+a.profileid),j.lstSubscribed=!1,a.subscribedEventsLST.indexOf(j.id)>=0&&a.subscribedEventsLST.splice(a.subscribedEventsLST.indexOf(j.id),1))}a.lastLiveSportID=b.id}if(g.length>0&&(angular.forEach(g,function(b){for(var c in a.masterEventsList){if(c!=b)break;var d=a.masterEventsList[c];if(d.odds)for(var e in d.odds)d.odds[e].lst&&(console.log("B1 - Deleting outcomeID "+e+" in event "+c+" due to LST cleanup before an LST GET"),delete d.odds[e])}angular.forEach(a.leagueOpened,function(a){if(a.events)for(var c in a.events){if(c!=b)break;if(a.events[c].odds){var d=a.events[c].odds;for(var e in d)console.log("B2 - Deleting outcomeID "+e+" in event "+c+" due to LST cleanup before an LST GET"),d[e].lst&&delete d[e]}}})}),a.showFullScreenLoader=!0,a.fullScreenLoaderDependencies.odds=!0,a.tryToRemoveFullScreenLoader(),f.odds(g,!0)),!e){if($(".rightInner").hide(),a.totalStateChanges>=2)$(".coming").fadeOut("fast",function(){$(".section").show(),$(".leftInner").fadeIn(300).parent().removeAttr("class").addClass("col-md-12 col-lg-12")});else{$(".coming").hide(),$(".section").show();var l=$(".leftInner");l.parent().removeAttr("class").addClass("col-md-12 col-lg-12"),l.show()}a.isMobile&&a.navClose()}if(0==a.betslipKeyChanges)a.eventOpened={};else{var m=a.eventOpened;a.eventOpened={},a.getOdds(m),a.betslipKeyChanges=0}a.updatePageTitleBasedOnState(),"function"==typeof c&&c(),"function"==typeof a.nextWSEventsCallback&&(a.nextWSEventsCallback(),a.nextWSEventsCallback=void 0),a.getEventsPending=!1}},a.setMaxHeight=function(){},a.hideLeftInner=!1,a.getOddsWrapper=function(b,c,d){a.navClose(),a.waitForDom(),a.showFullScreenLoader=!0,a.fullScreenLoaderDependencies.odds=!0,a.tryToRemoveFullScreenLoader(),1==a.oddMode?k.go("liveWithSportAndEvent",{sportName:b,eventID:d},{reload:!0}):k.go("prematchWithSportAndLeagueAndEvent",{sportName:b,leagueID:c,eventID:d},{reload:!0})},a.getOdds=function(b,d){a.marketsAreaLoading=!0,a.showFullScreenLoader=!0,a.fullScreenLoaderDependencies.odds=!0,a.tryToRemoveFullScreenLoader(),$(".rightInner").show(),$("#singleEventMarketsArea").hide(),a.marketClearPendingByEventID.indexOf(b.id)<0&&a.marketClearPendingByEventID.push(b.id),console.log("getOdds called"),angular.equals({},b)||!angular.equals({},a.eventOpened)&&a.eventOpened.id==b.id||(a.eventOpened=b,a.isMobile&&(a.hideLeftInner=!0),c(function(){angular.equals({},a.subscribedEventOdds)||a.subscribedEventOdds.eventID==b.id||(a.auxiliarySubscribedEventsFull.indexOf(a.subscribedEventOdds.eventID)<0&&f.unSubscribe("odds_"+a.subscribedEventOdds.eventID+"_"+a.subscribedEventOdds.bookmakerid+"_"+a.subscribedEventOdds.profileid),a.subscribedEventOdds={}),(angular.equals({},a.subscribedEventOdds)||a.subscribedEventOdds.eventID!=b.id)&&(f.subscribe("odds_"+b.id+"_"+a.bookmakerid+"_"+a.profileid),a.subscribedEventOdds={eventID:b.id,bookmakerid:a.bookmakerid,profileid:a.profileid});var e=function(){c(function(){a.marketsAreaLoading=!1,$("#singleEventMarketsArea").fadeIn(500)},250)};a.nextWSOddsCallback=e;var g=!1;if(console.log("V2 - Master event obj odds cleared for "+b.id),a.marketsByEventID[b.id]={},a.masterEventsList[b.id]&&(a.masterEventsList[b.id].odds={}),a.eventOpened&&a.eventOpened.id==b.id&&(a.eventOpened.odds={}),a.leagueOpened.forEach(function(a){if(a.events)for(var c in a.events)c==b.id&&(a.events[c].odds={})}),a.isMobile)e();else{var h=$(".leftInner").parent();h.hasClass("col-md-5")&&h.hasClass("col-lg-5")||(g=!0,$(".leftInner").parent().removeAttr("class"),$(".leftInner").parent().addClass("col-md-5 col-lg-5",500,"linear",function(){c(function(){f.odds([b.id],!1)},250)}))}1==a.betslipKeyChanges&&(a.betslipKeyChanges=0),g||f.odds([b.id],!1),c(function(){a.getScoreboardData(1)},250),"function"==typeof d&&d()},5))},a.getLiveSchedule=function(){f.liveSchedule()},a.filterLiveEventsSchedulePage=function(b,c){if(a.isMobile)return void(a.liveScheduleListFilteredPage=a.liveScheduleListFiltered);var d=a.liveScheduleListFilteredSubset||a.liveScheduleListFiltered;a.liveScheduleListFilteredPage=d.slice(b,b+c)},a.doFilterLiveEventsSchedule=function(){var b=a.liveScheduleListFiltered=[];angular.forEach(a.liveScheduleListEST,function(c,d){angular.forEach(c,function(c,e){d!=a.liveEventDatePicker&&""!=a.liveEventDatePicker||c.sportid!=a.liveEventSportPreference&&0!=a.liveEventSportPreference||b.push(c)})}),a.liveScheduleListFilteredSubset=p("filter")(b,a.modalSearchQuery),
a.$root.$emit("schedule.filtered",a.liveScheduleListFilteredSubset||a.liveScheduleListFiltered)},a.doFilterHistoryTransactions=function(){a.historyTransactionDetails=0,a.getHistoryList()},a.setSortFactorHistoryTransactions=function(b){b==a.historyTransactionsSortFactor&&(a.historyTransactionsSortDirection="DESC"==a.historyTransactionsSortDirection?"ASC":"DESC"),a.historyTransactionsSortFactor=b,"status"==a.historyTransactionsSortFactor,a.getHistoryList()},a.getHistoryTransactionsLength=function(){var b=0;return angular.forEach(a.historyTransactionsListFilteredForBar,function(c){"Pending"==c.m_status&&-1==a.hiddenTickets.indexOf(c.betcontainer_id)&&b++}),270*b},a.showTransactionTicket=function(b){return"Pending"==b.m_status&&-1==a.hiddenTickets.indexOf(b.betcontainer_id)?!0:!1},a.hiddenTickets=[],a.hideTicket=function(b){var c=e.get("hiddenTickets");c&&(a.hiddenTickets=c.split("_")),b&&(a.hiddenTickets.length>20&&a.hiddenTickets.slice(0,1),a.hiddenTickets.push(b),e.put("hiddenTickets",a.hiddenTickets.join("_")))},a.hideTicket(),a.objectLength=function(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b},a.objectLeaguesAllEvents=function(a){var b=0,c=!1;for(c in a)if(a.hasOwnProperty(c))for(var d in a[c].events)b++;return b},a.toggleGroupTitle=function(a){var b=angular.element(a.currentTarget);b.find(".rightInfo i").toggleClass("icon-right-open icon-down-open"),b.parent().parent().find(".marketParticipantsArea").toggle(300)},a.alternateTitleFormat=function(a){switch(a){case 2:case 6:case 8:case 10:return!0}return!1},a.getEventSeparatorCharacter=function(a){switch(a){case 1:return"v";case 2:return"vs";case 3:return"@"}return"vs"},a.auxiliarySubscribe=function(b,c,d){var e="odds_";if(c){if(e="lst_",a.auxiliarySubscribedEventsLST.indexOf(b)>=0)return;a.auxiliarySubscribedEventsLST.push(b)}else{if(a.auxiliarySubscribedEventsFull.indexOf(b)>=0)return;a.auxiliarySubscribedEventsFull.push(b)}f.subscribe(e+b.toString()+"_"+a.bookmakerid+"_"+a.profileid),d&&f.odds([b],c)},a.auxiliaryUnsubscribe=function(b){var c=!0,d=!0;a.subscribedEventOdds.eventID==b&&(c=!1),a.subscribedEventsLST.indexOf(b)>=0&&(d=!1);var e=a.auxiliarySubscribedEventsFull.indexOf(b);e>=0&&a.auxiliarySubscribedEventsFull.splice(e,1);var g=a.auxiliarySubscribedEventsLST.indexOf(b);g>=0&&a.auxiliarySubscribedEventsLST.splice(g,1),c&&f.unSubscribe("odds_"+b.toString()+"_"+a.bookmakerid+"_"+a.profileid),d&&f.unSubscribe("lst_"+b.toString()+"_"+a.bookmakerid+"_"+a.profileid)},a.isOddInBetSlip=function(b){var c=a.bets,d=c.length,e,f;if(!d||!b)return!1;for(f=0;d>f;++f)if(e=c[f],e&&b.externaloddsid==e.externaloddsid)return!0;return!1},a.addToBetSlip=function(b,c,d,e){var f=!0;if(-1==G.indexOf(b.status)){if(angular.forEach(a.bets,function(a){a.externaloddsid==b.externaloddsid&&(f=!1)}),f){a.auxiliarySubscribe(b.eventid,b.lst);var g=-1,h=-1,i={externaloddsid:b.externaloddsid,bet:b.bet,providerid:1,outcomeid:b.outcomeid,display:b.display,line:b.line,currentprice:b.currentprice.toString(),hometeamname:b.hometeamname,awayteamname:b.awayteamname,eventTimeString:a.utcToEasternString(b.timecreated),outcomestring:a.outcomes[b.sportid][b.outcomeid][b.islive].title,towin:"0.00",eventid:b.eventid,sportid:b.sportid,needsUpdate:!1,price_american:b.price_american,islive:b.islive,round_data:b.round_data,currentprice_old:0,price_american_old:0,minBet:0,maxBet:0,status:"waiting",statusOdd:b.status,active:1,storage_row:b.storage_row||-1,storage_col:b.storage_col||-1,leagueid:b.leagueid,lst:b.lst,time_added:(new Date).getTime(),market_price:b.market_price.toString(),true_right_hand_team_name:b.true_right_hand_team_name,true_left_hand_team_name:b.true_left_hand_team_name,team_separator_parsed:b.team_separator_parsed};if("undefined"!=typeof c&&c>=0){var j=c*i.currentprice-c;i.stake=c,i.towin=j.toFixed(2)}"undefined"!=typeof d?a.bets.splice(d,0,i):a.bets.push(i),a.getOddsMinMax(b),e||a.mobileBetSlipToggle(),setTimeout(function(){$("input.stakeInput").filter(function(){return!this.value}).first().focus().select()},500)}1!=a.betslip||f||a.getOddsMinMax()}},a.removeBets=function(){angular.forEach(a.bets,function(b){a.auxiliaryUnsubscribe(b.eventid),D(b)}),a.bets=[],a.betslipLocaleError="",a.removeBetsAfter()},a.removeBet=function(b){var c={};angular.forEach(a.bets,function(d,e){"undefined"==typeof c&&(c[d.eventid]=0),d.externaloddsid==b&&(a.bets.splice(e,1),D(d))}),angular.forEach(a.bets,function(a){"undefined"!=typeof c&&(c[a.eventid]+=1)});for(var d in c)c[d]<1&&a.auxiliaryUnsubscribe(d);a.removeBetsAfter()},a.removeBetByEventID=function(b){var c=!1;angular.forEach(a.bets,function(d,e){parseInt(d.eventid)==parseInt(b)&&(a.bets.splice(e,1),c=!0)}),c&&a.removeBetsAfter()},a.removeBetsAfter=function(){0==a.bets.length&&window.calcWidth<1280&&a.mobileBetSlipToggle()},a.betsNotChangedWhilePopup=function(){for(var b=1,c=a.bets.length;c--;){if("Open"!=a.bets[c].statusOdd)return-2;parseFloat(a.bets[c].currentprice_old)>0&&(b=-1)}return b},a.updateBetsChangesDuringPopup=function(){for(var b=[],c=[],e=a.bets.length;e--;)if(a.bets[e].status="waiting",-1!=G.indexOf(a.bets[e].statusOdd))!function(){var b=e,c=a.bets[e],f=c.storage_row,g=c.storage_col,h=0,i=!1;console.log("Creating restoration interval..."),i=d(function(){if(18>h){h++;var e=a.marketsByEventID[c.eventid];if(e&&e[c.islive]&&e[c.islive][c.outcomeid]&&e[c.islive][c.outcomeid].entries&&e[c.islive][c.outcomeid].entries[f]&&e[c.islive][c.outcomeid].entries[f][g]&&e[c.islive][c.outcomeid].entries[f][g].entity&&-1==G.indexOf(e[c.islive][c.outcomeid].entries[f][g].entity.status)&&0==e[c.islive][c.outcomeid].entries[f][g].placeholder){var j=e[c.islive][c.outcomeid].entries[f][g].entity;console.log("Destroying restoration interval after successful restoration attempt!",j,c,b),a.addToBetSlip(j,c.stake,b,!0),d.cancel(i)}}else console.log("Destroying restoration interval after "+h+" restoration attempts..."),d.cancel(i)},5e3)}(),c.indexOf(e)<0&&c.push(e);else if(-1==G.indexOf(a.bets[e].statusOdd)&&"Open"!=a.bets[e].statusOdd){var f=!1,g=a.bets[e],h=g.storage_row,i=g.storage_col;if(a.marketsByEventID[g.eventid]&&a.marketsByEventID[g.eventid][g.islive]&&a.marketsByEventID[g.eventid][g.islive][g.outcomeid]&&a.marketsByEventID[g.eventid][g.islive][g.outcomeid].entries&&a.marketsByEventID[g.eventid][g.islive][g.outcomeid].entries[h]&&a.marketsByEventID[g.eventid][g.islive][g.outcomeid].entries[h][i]&&a.marketsByEventID[g.eventid][g.islive][g.outcomeid].entries[h][i].entity&&0==a.marketsByEventID[g.eventid][g.islive][g.outcomeid].entries[h][i].placeholder){var j=a.marketsByEventID[g.eventid][g.islive][g.outcomeid].entries[h][i].entity,k={stake:g.stake,odd:j,index:e};b.push(k),f=!0}(P||!P&&f)&&c.indexOf(e)<0&&c.push(e)}else{a.bets[e].currentprice_old=0,a.bets[e].price_american_old=0;var g=a.bets[e];a.masterEventsList[g.eventid]&&a.masterEventsList[g.eventid].odds&&a.masterEventsList[g.eventid].odds[g.outcomeid]&&a.masterEventsList[g.eventid].odds[g.outcomeid].data&&a.masterEventsList[g.eventid].odds[g.outcomeid].data.length>=1&&a.masterEventsList[g.eventid].odds[g.outcomeid].data.forEach(function(b){b.externaloddsid==g.externaloddsid&&(g.currentprice=b.currentprice,g.price_american=b.price_american,g.market_price=b.market_price.toString(),a.stakeChanged(g.externaloddsid,g.currentprice,g.stakeinput))})}a.deleteBetsFromSlipBasedUponIndexes(c),b.forEach(function(b){console.log("Inserting odd at: "+b.index),a.addToBetSlip(b.odd,b.stake,b.index)}),a.betslipError=""},a.updateBetslipAfterServerErrorEncountered=function(){var b=[],c=-1;a.bets.forEach(function(a){c++,a.status&&"betAccepted"==a.status&&b.indexOf(c)<0&&b.push(c)}),a.deleteBetsFromSlipBasedUponIndexes(b),a.acceptBetsProcessingFinished=!1,a.updateBetsChangesDuringPopup(),a.bindPopupBets()},a.deleteBetsFromSlipBasedUponIndexes=function(b){if(b.length>0){b.forEach(function(b){a.bets[b]&&(a.bets[b].mustDeleteNow=!0)});var c=angular.copy(a.bets);a.bets=[],c.forEach(function(b){"undefined"==typeof b.mustDeleteNow&&a.bets.push(b)})}},a.$watch("bets",function(b,c){if(console.log("Betslip watcher"),0==a.bets.length&&(a.betSlipActive&&a.mobileBetSlipToggle(),0!=a.betslip&&a.betslipClick(0)),a.totalBetslipChanges>=1){var d=e.get("lastKnownBetslipSize");if(d){console.log("Old betslip length was: "+d);for(var f=0;d>f;f++)e.remove("lastKnownBetslipItem"+f)}e.put("lastKnownBetslipSize",b.length),console.log("New betslip size is: "+b.length);for(var g=b.length,f=0;g>f;f++)e.putObject("lastKnownBetslipItem"+f,b[f])}a.totalBetslipChanges++},!0),a.loadBetslipFromCookie=function(){var b=(new Date).getTime()-12e5,c=[],d=e.get("lastKnownBetslipSize");if(d){console.log("Old betslip size was: "+d);for(var f=0;d>f;f++)c[f]=e.getObject("lastKnownBetslipItem"+f)}if(c.length>0){for(var f=c.length-1;f>=0;f--){var g=c[f];g.time_added<b&&c.splice(f,1)}c&&"function"==typeof c.forEach&&(a.bets=c,a.bets.forEach(function(b){a.getOddsMinMax(b),a.stakeChanged(b.externaloddsid,b.currentprice,b.stakeinput),a.auxiliarySubscribe(b.eventid,b.lst,!0)}))}a.betslipReinitialisePending=!1},a.getBetsPopupRowClass=function(a){return"Open"!=a.statusOdd?"TemporarilySuspended":parseFloat(a.currentprice_old)>0?"betChanged":""},a.dropdownClick=function(b){a.loadingSports||(angular.element(b.currentTarget).parent().find(".select").hasClass("active")?angular.element(".dropdown .select").removeClass("active"):(angular.element(".dropdown .select").removeClass("active"),angular.element(b.currentTarget).parent().find(".select").addClass("active")),a.updateURL())},a.mainClick=function(a){angular.element(a.target).hasClass("targetDropdown")||angular.element(".dropdown .select").removeClass("active")},a.closeRightInner=function(b){a.eventOpened={},$(".leftInner").parent().removeAttr("class").addClass("col-md-12 col-lg-12"),a.isMobile&&!b?(a.hideLeftInner=!1,a.waitForDom(),1===a.oddMode?k.params.sportName?k.go("liveWithSport",{sportName:k.params.sportName}):k.go("live",!1,{reload:!0}):k.params.sportName&&k.params.leagueID?k.go("prematchWithSportAndLeague",{sportName:k.params.sportName,leagueID:k.params.leagueID}):k.params.sportName?k.go("prematchWithSport",{sportName:k.params.sportName}):k.go("prematch",!1,{reload:!0})):b||a.updateURL(),a.$root.$emit("close.right.inner")},a.closeLeftInner=function(){a.eventOpened={},a.leagueOpened={},a.sportOpened={},a.isMobile&&(a.hideLeftInner=!1),$(".section").hide(),$(".leftInner").fadeOut(300,function(){$(".leftInner").parent().removeAttr("class").addClass("col-md-12 col-lg-12")}),$(".coming").fadeIn(),a.isMobile&&a.navOpen(),a.waitForDom(),1===a.oddMode?k.params.sportName?k.go("liveWithSport",{sportName:k.params.sportName}):k.go("live",!1,{reload:!0}):k.params.sportName?k.go("prematchWithSport",{sportName:k.params.sportName}):k.go("prematch",!1,{reload:!0}),a.$root.$emit("close.left.inner")},a.ifEmptyEventOpened=function(){return!!angular.equals({},a.eventOpened)},a.betslipKeyChanges=0,a.betslipClick=function(b){a.betslip!=b&&(a.betslip=b,a.betslipKeyChanges=1,0==b?a.dataRequestSports.preferredOutcomes="all":(a.dataRequestSports.preferredOutcomes="parlay",a.bets.length>0&&a.getOddsMinMax()),f.sports(a.dataRequestSports))},a.oddsFormatClick=function(b){a.oddFormat=b,e.put("oddsFormat",b)},a.fontSizeClick=function(b){F.style.zoom=a.fontSizeValues[b],e.put("userFontSizeKey",b)},a.oddsModeClick=function(b){a.oddMode!=b&&(console.log(b),a.setOddsMode(b),a.dataRequestSports.isLive=b,a.getSportsWS())},a.$on("webSocketReconnected",function(){console.log("Websock signal captured"),(0===a.oddMode||1===a.oddMode)&&a.getSportsWS(),a.doPing()}),a.parlayStakeChanged=function(b){var c=1;a.bets.forEach(function(a){c*=a.currentprice}),isNaN(parseFloat(b))?(a.toWon=0,a.stake=0):(a.toWon=(Math.round(b*c*100)/100).toFixed(2),a.stake=b)},a.findRiskBasedOnToWin=function(a,b){return a/(b-1)},a.stakeChanged=function(b,c,d){a.bets.forEach(function(e){if(e.externaloddsid==b){var f=c;if(!d)return e.towin=0,void(a.useToWinForMinusLines&&(e.stake=0));a.useToWinForMinusLines&&2>f?(e.towin=d,e.stake=a.findRiskBasedOnToWin(e.towin,f),console.log("ToWin is now "+e.towin)):(e.towin=isNaN(parseFloat(d))?0:(Math.round(100*(d*f-d))/100).toFixed(2),e.stake=d)}})},a.utcToEasternString=function(b){var c=a.tzConfig.zone||"America/New_York",d=a.tzConfig.label||"EST",e="YYYY-MM-DD hh:mm:ss A ["+d+"]";return moment.utc(1e3*b).tz(c).format(e)},a.utcToEasternStringMin=function(b){var c=a.tzConfig.zone||"America/New_York";return moment.utc(1e3*b).tz(c).format("hh:mm A")},O.on("hidden.bs.modal",function(){if(P=!1,1==a.clearCurrentBetSlip){a.clearCurrentBetSlip=0;for(var b=a.bets.length;b--;)"betAccepted"==a.bets[b].status?a.bets.splice(b,1):a.bets[b].status="waiting";a.isMobile&&a.bets.length<1&&a.betSlipActive&&a.mobileBetSlipToggle()}}),O.on("shown.bs.modal",function(){P=!0}),a.toggleOddMode=function(){j.path(0!=a.oddMode?"/prematch":"/live"),a.$root.$emit("oddmode.change")},a.popupOpenBets=function(){a.bindPopupBets(),a.betslipLocaleError="";var b=0;angular.forEach(a.bets,function(a){-1==G.indexOf(a.statusOdd)&&b++});var c=!0;0===a.betslip?angular.forEach(a.bets,function(b){-1==G.indexOf(b.statusOdd)&&(b.stake<b.minBet||b.stake>b.maxBet||0==b.stake||!b.stake)&&(a.betslipLocaleError=a.betslipErrors.betMinMax,c=!1)}):(a.stake||0==a.parlayMinBet&&0==a.parlayMaxBet)&&(a.stake<a.parlayMinBet||a.stake>a.parlayMaxBet)&&(a.betslipLocaleError=a.betslipErrors.betMinMax,c=!1),c&&b&&(a.betslipError="",a.acceptBetsProcessingFinished="",delete a.freezedBets,O.modal("show"),a.updateBetsChangesDuringPopup())};var S=angular.element("#popupCalendar");a.$root.$on("trigger.show.calendar.modal",function(){a.popupOpenCalendar()}),S.on("shown.bs.modal",function(){a.shownBsModal=!0,a.$root.$emit("shown.bs.modal.schedule")}),S.on("hidden.bs.modal",function(){a.shownBsModal=!1,a.$root.$emit("hidden.bs.modal.schedule")}),a.popupOpenCalendar=function(){S.modal("show")};var T=$("#popupHistory");a.popupOpenHistory=function(){var b=E.width();a.windowWidth=window.calcWidth=b,$("#popupHistory .modal-dialog").width(window.calcWidth-15+"px"),T.modal("show"),a.getHistoryList()};var U=$("#popupRules");a.popupOpenRules=function(){U.modal("show")},a.scrollToRule=function(a){j.hash(a),i()};var V=$("#popupSettings");a.popupOpenSettings=function(){V.modal("show")},a.returnOddsNextRow=function(a){if(a.length<3)return a;for(var b="",c=0;c<a.length;c++){a[c].rowClass="",b!=a[c].row&&((0==a[c].column||c>0&&2==a[c-1].column)&&(a[c].rowClass+=" nextRow"),b=a[c].row);var d=a[c].column<3?a[c].column:0;a[c].rowClass+=" currentColmn"+d}return a},a.getOddsMinMax=function(b){var c={};c.lines=[],"undefined"!=typeof b?(c.type="straight",c.lines=[{externaloddsid:b.externaloddsid,bet:b.bet,outcomeid:b.outcomeid,display:b.display,line:b.line,currentprice:b.currentprice.toString(),hometeamname:b.hometeamname,awayteamname:b.awayteamname,eventTimeString:"",outcomestring:b.outcomestring,towin:"0.00",eventid:b.eventid,sportid:b.sportid,needsUpdate:!1,price_american:b.price_american,islive:b.islive}],c.stake=1):(c.type="parlay",a.bets.forEach(function(a,b){c.lines.push({externaloddsid:a.externaloddsid,bet:a.bet,outcomeid:a.outcomeid,display:a.display,line:a.line,currentprice:a.currentprice.toString(),hometeamname:a.hometeamname,awayteamname:a.awayteamname,eventTimeString:"",outcomestring:a.outcomestring,towin:"0.00",eventid:a.eventid,sportid:a.sportid,needsUpdate:!1,price_american:a.price_american,islive:a.islive})}),c.stake=1),f.limits(c.lines,window.frontendID,window.frontendID,a.accountIDInternal.toString(),c.type)},a.getHistoryList=function(b,c,d){var e=(new Date).getTime()/1e3-86400*a.historyTransactionsRange,f={start:e,wager_status:a.historyTransactionsWagerStatus,orderBy:a.historyTransactionsSortFactor,direction:a.historyTransactionsSortDirection,startIndex:c,limit:d};a.historyRequesting=!0,g.getHistory(f).then(function(){var c=g.getHistData();c&&c.response&&"undefined"!=typeof c.response.rowset&&(c.response.rowset.forEach(function(b,c){b.description=b.descriptionComplete;var d=b.description.split(":");b.shortDescription=b.outcomeTitleParsed+": "+d[3],""==b.freeplay_balance_before&&(b.freeplay_balance_before="-"),""==b.real_balance_before&&(b.real_balance_before="-"),""==b.real_balance_after&&(b.real_balance_after="-"),""==b.freeplay_balance_after&&(b.freeplay_balance_after="-");var e="$",f="Error";0==b.betcontainer_status&&b.last_settlement_id<1?f="Pending":0==b.betcontainer_status&&b.last_settlement_id>0?f="Lose":1==b.betcontainer_status?f="Win":2==b.betcontainer_status?f="Push":3==b.betcontainer_status?f="Half Win":4==b.betcontainer_status&&(f="Half Lose"),b.m_status=f,b.m_settlement_balance_before="-",b.m_settlement_balance_after="-",b.m_settlement_pre_rebate="-",b.m_settlement_rebate="-",b.m_settlement_total="-",b.ccc&&"USD"!=b.ccc&&(e=""),(b.settlement_balance_after>0||b.last_settlement_id>0)&&(b.m_settlement_balance_after=e+(b.settlement_balance_after/100).toFixed(2),b.settlement_balance_before>0&&(b.m_settlement_balance_before=e+(b.settlement_balance_before/100).toFixed(2)),b.m_settlement_pre_rebate=e+(b.last_settlement_pre_rebate/100).toFixed(2),b.m_settlement_rebate=e+(b.last_settlement_rebate/100).toFixed(2),b.m_settlement_total=e+(b.last_settlement_amount/100).toFixed(2)),b.m_bet_balance_after=e+(b.bet_balance_after/100).toFixed(2),b.m_bet_balance_before=e+(b.bet_balance_before/100).toFixed(2),b.m_towin=e+(b.betcontainer_towin/100).toFixed(2),b.m_rebate_percentage=100*b.rebate_percentage+"%",b.m_wageramount=e+(b.betcontainer_amount/100).toFixed(2),b.ca&&b.ca>0&&(b.m_wageramount=e+(b.ca/100).toFixed(2)),b.m_wagerdate=a.utcToEasternString(b.betcontainer_timeprocessed),b.m_settlementdate="-",b.last_settlement_id>0&&b.last_settlement_date>0&&(b.m_settlementdate=a.utcToEasternString(b.last_settlement_date)),b.rebate_percentage>0&&(a.showRebateColumn=!0),b.description=b.description.replace(new RegExp(":([0-9]{2})EST:","g"),":$1: <br>"),b.description=b.description.replace(new RegExp(" ","g")," <wbr>"),b.description=b.description.replace(new RegExp("\n","g"),"<br />"),b.descriptionTrust=o.trustAsHtml(b.description)}),a.historyRequesting=!1,a.$broadcast("history.receive",c.response),a.showPendingTickets&&"undefined"!=typeof b?a.historyTransactionsListFilteredForBar=c.response.rowset:a.historyTransactionsListFiltered=c.response.rowset)})},a.acceptBetsProcessing=0,a.acceptBetsProcessingFinished="",a.clearCurrentBetSlip=0,a.showConfirmationScreenOKButton=!1,a.accept=function(){function b(){--a.acceptBetsProcessing||(a.betslipError?delete a.freezedBets:(a.acceptBetsProcessingFinished="Your wager was successfully placed.",a.showConfirmationScreenOKButton=!0),tellParentThatBalancesHaveUpdated(),a.clearCurrentBetSlip=1,c(function(){a.unbindPopupBets()},100))}var d=a.freezedBets=angular.copy(a.bets),e=a.bets,f=Math.random().toString().substring(2),h=!1;a.acceptBetsProcessingFinished="",a.betslipError="",a.clearCurrentBetSlip=0,a.showConfirmationScreenOKButton=!1,angular.forEach(d,function(a,b){a.currentprice=e[b].currentprice=a.currentprice.toString(),a.status=e[b].status=""}),1===parseInt(a.freeplayCfg.freeplayIsChecked)&&(h=!0),0===a.betslip?(a.acceptBetsProcessing=e.length,angular.forEach(d,function(c,d){g.doBet("straight",c.stake,h,[c],f).then(function i(f){console.log("doBet",c),console.log("Response",f,f.response);var g="";f.data.response&&f.data.response.containerID&&f.data.response.containerID>0&&"ok"==f.data.response.code?g="betAccepted":f.data.response&&f.data.response.code&&"ok"!=f.data.response.code?g=f.data.response.code:!f.data||"not_logged_in"!=f.data&&"emergency_mode"!=f.data||(g=f.data),c.status=e[d].status=g,"betAccepted"!==g&&(a.betslipError="There were errors in processing your wager."),console.log("{}`th bet`s status: "+g),b()},function j(){a.betslipError=a.betslipErrors.unknown_error,c.status=e[d].status="unknown_error",b()})})):(a.acceptBetsProcessing=1,g.doBet("parlay",a.stake,h,d,f).then(function i(c){c.data.response&&c.data.response.containerID&&c.data.response.containerID>0&&"ok"==c.data.response.code?a.acceptBetsProcessingFinished="Your bet has been accepted.":!c.data||"not_logged_in"!=c.data&&"emergency_mode"!=c.data?c.data&&c.data.response&&c.data.response.code&&"ok"!=c.data.response.code&&(a.betslipError=a.betslipErrors[c.data.response.code],console.log("BETSLIP ERROR: "+a.betslipError)):a.betslipError=a.betslipErrors[c.data],b()},function j(){a.betslipError=a.betslipErrors.unknown_error,b()}))},a.hideOddByStatus=function(b){return"Open"!=b.status&&-1==G.indexOf(b.status)||b.islive!=a.oddMode?!1:!0},a.getOddsClass=function(a,b){var c="",d="",e="",f=0,g=0;-1!=G.indexOf(b.status)&&(c+=" temporarilySuspended");var h=2;return angular.forEach(a.data,function(c,d){1==c.column&&a.data.length>2&&(h=3),0==d&&c.id==b.id?f=1:d==a.data.length&&c.id==b.id&&(g=1)}),f&&1==b.column&&(e="mr33"),2==a.data.length&&(d="clearNone"),c+=" totalColumns"+h+" currentColmn"+b.column+" "+d+" "+e},a.getColumnOddClass=function(a,b,c){return 1==c?b+" oddplaceholder":a&&a.status?-1!=G.indexOf(a.status)?b+" temporarilySuspended":b:" oddplaceholder possibleissue"},a.emptyFirstOddsObj={},a.getFirstOddsEntryFromRowColumnObject=function(b){var c=[],d=[];if(!b)return a.emptyFirstOddsObj;for(var e in b){var f=b[e];for(var g in f){var h=f[g];h.entity&&(-1!=G.indexOf(h.entity.status)?c.push(h.entity):"Open"==h.entity.status&&d.push(h.entity))}}var i=function(a,b){return a.lastupdate<b.lastupdate?1:a.lastupdate>b.lastupdate?-1:0};return d.length>=1?(d.sort(i),d[0]):c.length>=1?(c.sort(i),c[0]):a.emptyFirstOddsObj},a.getBetParlayCoefficient=function(){var b=1;return angular.forEach(a.bets,function(a){-1==G.indexOf(a.statusOdd)&&(b*=a.currentprice)}),b},a.getParlayTowin=function(){var b=a.getBetParlayCoefficient(),c=b*a.stake-a.stake;return c},a.getLiveTowin=function(a){return a.towin=isNaN(parseFloat(a.stake))?0:(Math.round(100*(a.stake*a.currentprice-a.stake))/100).toFixed(2),a.towin},a.ifEventBlocked=function(b){if("NSY"!=b.status&&"inprogress"!=b.status)return!0;var c=a.sports[b.sportid],d=c&&c.leagues[b.leagueid];return void 0!=c&&void 0!=d&&d.ui_hide?!0:!1},a.marketBlockedForEvent=function(b,c){return b=b.toString(),c=c.toString(),a.blockedMarketIDsByEvent[b]&&a.blockedMarketIDsByEvent[b]&&a.blockedMarketIDsByEvent[b].indexOf(c)>=0?!0:!1},a.navActive=!0,a.isLastNav=!0,a.navToggle=function(){a.isMobile&&(a.navActive=!a.navActive,a.isLastNav=!a.isLastNav,a.betSlipActive=!1,a.navActive?angular.element(".middleContainer").hide():angular.element(".middleContainer").show())},a.navOpen=function(){return a.isMobile?(a.navActive=!0,a.isLastNav=!0,void(a.betSlipActive=!1)):!1},a.navClose=function(){return a.isMobile?(a.navActive=!1,a.isLastNav=!1,void(a.betSlipActive=!1)):!1},a.betSlipActive=!1,a.mobileBetSlipToggle=function(){a.isSmallScreen&&(a.bets.length||a.betSlipActive)&&(a.betSlipActive=!a.betSlipActive,a.betSlipActive?(angular.element(".rightSidebar").show(),angular.element(".middleContainer").hide(),a.navActive=!1):(angular.element(".rightSidebar").hide(),angular.element(".middleContainer").show(),a.isLastNav&&(a.navActive=!0)))},a.isMobileNavMenuOpen=function(){return a.isMobile&&$(".leftSidebar, .sports-live-menu-wrapper").is(":visible")?!0:!1},a.$on("$routeChangeSuccess",function(){console.log("Route changed to "+a.locationHelper.path())}),e.get("oddsFormat")&&a.oddsFormatClick(parseInt(e.get("oddsFormat"))),e.get("userFontSizeKey")&&a.fontSizeClick(parseInt(e.get("userFontSizeKey"))),1!=a.showPendingTickets||a.isMobile||(a.getHistoryList("forHistoryBar"),d(function(){$("#myPendingTickets").hasClass("active")?(a.getHistoryList("forHistoryBar"),console.log("getHistoryList called")):console.log("getHistoryList postponed")},6e4)),a.toggleTicketsBar=function(){$(".main").toggleClass("ticketsBar"),$("#myPendingTickets").toggleClass("active"),$("#myPendingTickets .arrowToggle").toggleClass("active")},a.configHorizontal={theme:"minimal",axis:"x",scrollInertia:0},a.configVertical={theme:"inset-3-dark",axis:"y",scrollInertia:0,callbacks:{onTotalScrollOffset:150,onTotalScroll:function(){}}},a.doPing=function(){b.get(a.servicesURL+"ping.php").success(function(b){var c=!0;if(b&&b.response&&(0===b.response.initialisation_result_code&&(c=!1,a.accountIDFriendly=b.response.userid_operator,a.accountIDInternal=b.response.userid_internal,"undefined"!=typeof b.response.overall_limit_pct&&(a.myLimitFactor=b.response.overall_limit_pct),a.emergency_mode=b.response.emergency_mode,f.activeSubscriptions.indexOf("user_"+a.accountIDInternal)<0&&f.subscribe("user_"+a.accountIDInternal),f.activeSubscriptions.indexOf("user_all")<0&&f.subscribe("user_all")),b.response.colorScheme)){var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.href="assets/bet-lobby-"+b.response.colorScheme+".css",document.head.appendChild(d)}c&&(console.log("Session error condition detected."),window.location=a.servicesURL+"redirect_to_login.php")})},a.doPing(),d(function(){a.doPing()},58e3),a.scrollManual=function(a){a>0?$("ticketsContainerParent").mCustomScrollbar("scrollTo","+=540",{timeout:400,scrollInertia:400}):$("ticketsContainerParent").mCustomScrollbar("scrollTo","-=540",{timeout:400,scrollInertia:400})};var W,X=0,Y=0;a.attemptToGetState=function(b){if(!a.haveGottenInitialEvents)return console.log("Delaying state machine due to absence of initial events"),c(function(){a.attemptToGetState()},250),!0;var d=function(){c.cancel(W),W=c(function(){X++,5>X&&a.attemptToGetState(!0);var b=(new Date).getTime();b-6e4>Y&&(X=0,Y=b,console.log("attemptToGetState - reset retry loop"))},500)};if(k&&k.current&&"home"==k.current.name){var f=e.get("sessionState");f?(a.wasStateRedirectBasedOnCookie=!0,j.path(f)):j.path("/live")}var g=function(b){return console.log("BuildSportCallback called for "+b),function(){b>0?a.sports[b]?(0===a.oddMode&&(a.leagueOpened=[],a.eventOpened={}),console.log("Calling $scope.getLeagues from within desiredSportID block of callback"),a.getLeagues(null,a.sports[b])):(delete k.params.sportName,console.log("The sportName requested in the state likely exists but is not on the current events roster; re-firing state machine..."),a.updateURL(!0)):(delete k.params.sportName,console.log("The sportName callback was created with a <0 sportID; re-firing state machine..."),a.updateURL(!0))}};if(k&&k.current&&k.current.name&&k.current.data&&"undefined"!=typeof k.current.data.oddModeOverride){var h=!1;a.oddMode!=k.current.data.oddModeOverride&&(h=!0),a.wasStateRedirectBasedOnCookie&&(h=!0),console.log("State machine is about to set odds mode - connection? "+a.connection),a.setOddsMode(parseInt(k.current.data.oddModeOverride));var i=0;for(var l in a.sports){i++;break}if(1>i)return a.connection?(a.getSportsWS(),void d()):void c(function(){a.attemptToGetState()},250);if(k.params&&k.params.eventID&&"-1"!=k.params.eventID){var m=function(){if(a.sportOpened&&a.sportOpened.id){var b=a.sportOpened.id;if(a.sports[b]){var d=a.sports[b];if(d.leagues){a.stateRequestedSportID=b;var e=d.leagues,f=!1;for(var g in e){var h=e[g];if(h.events)for(var i in h.events)if(h.events[i].id==k.params.eventID){f=!0,a.stateRequestedEventID=i,a.stateRequestedLeagueID=g;var j=1;a.totalStateChanges<2&&(j=10),a.sortEvents(),c(function(){a.getOdds(a.sports[a.stateRequestedSportID].leagues[a.stateRequestedLeagueID].events[a.stateRequestedEventID])},j)}}f||(delete k.params.eventID,delete k.params.leagueID,console.log("The eventID requested in the state was not found; re-firing state machine..."),a.updateURL(!0))}}}};a.nextWSEventsCallback=m}if(k.params&&k.params.leagueID&&"-1"!=k.params.leagueID){var n=function(){var b=!1;if(!a.sportOpened||!a.sportOpened.id)return console.log("State leagueCB - exiting early due to sportOpened problem"),console.log(a.sportOpened),void d();var c=a.sportOpened.id;if(!a.sports[c]&&!a.ajaxSports[c])return console.log("State leagueCB - exiting early due to $scope.sports not having theSportID."),void d();var e=a.sports[c]||a.ajaxSports[c];if(!e.leagues)return console.log("State leagueCB - exiting early due to currentSport.leagues being empty."),void d();var f=e.leagues;for(var g in f)g==k.params.leagueID&&(b=!0,a.getEvents(f[g]));b||(delete k.params.leagueID,delete k.params.eventID,console.log("The leagueID requested, "+k.params.leagueID+"in the state was not found; re-firing state machine..."),a.updateURL(!0))};a.nextWSLeaguesCallback=n}var o=void 0;if(k.params&&k.params.sportName?o=function(){var b=0;for(var c in a.sports){b++;break}if(1>b)return a.getSportsWS(),void d();var e=a.findSportIDByName(k.params.sportName),f=g(e);e>0?(console.log("State machine - afterSportsCallback calling returnFunc()"),f()):(delete k.params.sportName,console.log("The sportName requested in the state does not exist; re-firing state machine..."),a.updateURL(!0)),a.sortEvents()}:(a.eventOpened={},a.leagueOpened=[],a.sportOpened={}),(!k.params||k.params&&k.params.sportName&&!k.params.leagueID&&!k.params.eventID)&&(a.hideLeftInner=!1),k.params&&k.params.sportName&&k.params.leagueID&&!k.params.eventID&&0===a.oddMode&&(a.hideLeftInner=!1),k.params&&k.params.sportName&&!k.params.leagueID&&!k.params.eventID&&a.navOpen(),k.params&&(!k.params||k.params.sportName||k.params.leagueID||k.params.eventID)||a.navOpen(),h){var p=!1;a.getSportsWS(p,o)}else"function"==typeof o&&o();return a.putStateCookie(),1==a.totalStateChanges&&(a.betslipReinitialisePending=!0),k.params&&k.params.eventID&&"-1"!=k.params.eventID||a.closeRightInner(!0),!0}return!1};var Z,_=0,aa=0;a.tryState=function(){a.attemptToGetState()||(c.cancel(Z),Z=c(function(){console.log("tryState RetryLoop now "+aa),aa++,5>aa&&a.tryState(),(new Date).getTime()-6e4>_&&(console.log("tryState - resetting retry loop"),aa=0,_=(new Date).getTime())},100))},a.setOddsMode=function(b){window.theOddMode=b,a.oddMode=b,a.dataRequestSports.isLive=a.oddMode},a.updateURL=function(b){var c="live",d="",e=0,f=0;b?(c=k&&k.current&&1==k.current.data.oddModeOverride?"live":"prematch","undefined"!=typeof k.params.sportName&&(d=k.params.sportName),"undefined"!=typeof k.params.leagueID&&k.params.leagueID>0&&(e=k.params.leagueID),"undefined"!=typeof k.params.eventID&&k.params.eventID>0&&(f=k.params.eventID)):(0===a.oddMode&&(c="prematch"),a.sportOpened&&a.sportOpened.name&&(d=a.sportOpened.name),0===a.oddMode&&a.leagueOpened&&a.leagueOpened[0]&&(e=a.leagueOpened[0].id),a.eventOpened&&a.eventOpened.id&&(f=a.eventOpened.id));var g="live",h={},i={notify:!0,reload:!0};"prematch"==c?(d||(g="prematch",h={}),d&&!e&&(g="prematchWithSport",h={sportName:d}),d&&e&&!f&&(g="prematchWithSportAndLeague",h={sportName:d,leagueID:e}),d&&e&&f&&(g="prematchWithSportAndLeagueAndEvent",h={sportName:d,leagueID:e,eventID:f})):"live"==c&&(d||(g="live",h={}),d&&!f&&(g="liveWithSport",h={sportName:d}),d&&f&&(g="liveWithSportAndEvent",h={sportName:d,eventID:f})),a.waitForDom(),k.go(g,h,i).then(function(){a.putStateCookie()})},a.putStateCookie=function(){var a=j.path(),b=a.match(/\/[a-zA-Z]*(\/[a-zA-Z]+)?/);b[0]?e.put("sessionState",b[0]):e.remove("sessionState")},a.reloadBlocked=function(){return T.is(":visible")?!0:O.is(":visible")?!0:a.bets.length>0?!0:!1},a.reload=function(){a.reloadBlocked()?console.log("Delayed window.location.reload"):(a.$root.$emit("reload.page"),window.location.reload(!0))},d(function(){for(var b=(new Date).getTime()-12e5,c=a.bets.length,d=c-1;d>=0;d--){var e=a.bets[d];e.time_added<b&&a.bets.splice(d,1)}},5e3),a.$on("$locationChangeStart",function(b){a.isMobile&&a.betSlipActive&&(a.mobileBetSlipToggle(),b.preventDefault())}),a.$on("$stateChangeSuccess",function(){console.log("State transition success"),console.log(JSON.stringify(k.params)),a.totalStateChanges++;var b=!1;k&&k.current&&"home"!=k.current.name&&(b=!0,a.putStateCookie()),a.tryState(),b&&(a.wasStateRedirectBasedOnCookie=!1),a.updatePageTitleBasedOnState()}),a.updatePageTitleBasedOnState=function(){var b="Sports Wagering",c=function(b){if(a.masterEventsList[b]){var c=a.masterEventsList[b],d=c.hometeamname||"",e=c.awayteamname||"";return""!=d&&""!=e?d+" v. "+e:!1}};if(0===a.oddMode&&!k.params.sportName)return void(a.pageTitle="Sports Wagering - Prematch");

if(1===a.oddMode&&!k.params.sportName)return void(a.pageTitle="Sports Wagering - In Play");if(0===a.oddMode){var d=function(){var b=k.params.leagueID,c=!1;if(a.sports&&a.sports[a.findSportIDByName(k.params.sportName)]){var d=a.sports[a.findSportIDByName(k.params.sportName)];d.leagues&&d.leagues[b]&&(a.pageTitle="Sports Wagering - "+k.params.sportName+" - "+d.leagues[b].name,c=!0)}c||(a.pageTitle="Sports Wagering - Prematch - "+k.params.sportName)};if(k.params.sportName&&!k.params.leagueID)return void(a.pageTitle="Sports Wagering - Prematch - "+k.params.sportName);if(k.params.leagueID&&!k.params.eventID)return void d();if(k.params.leagueID&&k.params.eventID){d();var e=k.params.eventID;if(a.masterEventsList[e]){var f=k.params.eventID,g=c(f);g&&(a.pageTitle+=" - "+g)}return}}else if(1===a.oddMode){var h=!1;if(k.params.sportName&&!k.params.eventID)return void(a.pageTitle="Sports Wagering - In Play - "+k.params.sportName);if(k.params.eventID&&-1!=k.params.eventID){var f=k.params.eventID,g=c(f);g&&(h=!0,a.pageTitle="Sports Wagering - In Play - "+k.params.sportName+" - "+g)}return void(h||(a.pageTitle="Sports Wagering - In Play"))}a.pageTitle=b},a.findSportIDByName=function(b){if(!b)return-1;var c=b.toLowerCase();if(!a.ajaxSports)return-1;for(var d in a.ajaxSports)if(a.ajaxSports[d].name.toLowerCase()==c)return d;return-1},a.$on("$destroy",function(){n.off("scroll",scrollFn),console.log("******************************************************************************"),console.log("Everything should be cleared here")})}]),angular.module("betLobby").controller("HistoryPaginationController",["$scope","$element","paginationDefaults","paginationHelper",function(a,b,c,d){a.itemsPerPage=c.limit,a.maxSize=c.maxSize,a.changePage=function(){var b=a.currentPage-1;a.$parent.getHistoryList(void 0,c.limit*b)},a.$on("history.receive",function(c,e){a.totalItems=e.quantity,a.maxSize=d.calcMaxSize(a.totalItems,b.width())}),a.$root.$on("window.resize",function(){a.maxSize=d.calcMaxSize(a.totalItems,b.width())})}]).controller("SchedulePaginationController",["$scope","$element","paginationDefaults","paginationHelper","$filter",function(a,b,c,d,e){function f(){n.modalPaginationPage=a.currentPage,n.filterLiveEventsSchedulePage(c.limit*(a.currentPage-1),c.limit)}function g(){var b=n,c=b.liveEventDatePicker||void 0,d=moment().isSame(moment(c),"day"),e=1==a.oddMode,f=b.liveEventSportPreference,g=[];return a.totalItems?(g.push(a.totalItems),f&&g.push(b.liveScheduleSports[f||""]),g.push(e?"Live In-Play":"Prematch"),g.push(f?-1!=r.indexOf(~~f)?"matches":"games":"events"),c&&g.push(d?"remaining today":"on "+moment(c).format("dddd")),g.join(" ")):["There are no ",b.liveScheduleSports[f||""],-1!=r.indexOf(~~f)?"matches":"games","scheduled for",e?"Live In-Play":"Prematch","coverage",d?"today":"on "+moment(c).format("dddd")].join(" ")}function h(){if(a.liveScheduleListFiltered.length){var c=n.modalSearchQuery,f=n.liveScheduleListFilteredSubset=c?e("filter")(a.liveScheduleListFiltered,c):void 0;f&&(a.totalItems=f&&f.length||n.liveScheduleListFiltered&&n.liveScheduleListFiltered.length,a.currentPage=1,a.itemsPerPage=n.paginationItemsPerPage=j(),a.maxSize=d.calcMaxSize(a.totalItems,b.width()),a.changePage())}}function i(){a.itemsPerPage=n.paginationItemsPerPage=j(),a.maxSize=d.calcMaxSize(a.totalItems,b.width()),a.changePage()}function j(){var a=b.parent().find(".historyTransactionsContainer").height()-34;return c.limit=parseInt(a/q)}function k(){sessionStorage.setItem("historyPagination",JSON.stringify({currentPage:a.currentPage,searchQuery:n.modalSearchQuery,selecedDate:n.liveEventDatePicker,sportId:n.liveEventSportPreference}))}function l(){var b=JSON.parse(sessionStorage.getItem("historyPagination"));a.currentPage=b.currentPage||1,n.modalSearchQuery=b.searchQuery,n.liveEventDatePicker=b.selecedDate,n.liveEventSportPreference=b.sportId}function m(){sessionStorage.removeItem("historyPagination"),sessionStorage.removeItem("reopenSchedule")}var n=a.data=a.$parent,o=!!sessionStorage.getItem("reopenSchedule"),p=!1,q=n.isMobile?c.eventRowHeightMobile:c.eventRowHeightDesktop,r=[1,7,24];a.modalCtx=a,a.maxSize=c.maxSize,a.itemsPerPage=c.limit,a.changePage=f,a.filterEvents=h,a.getFilterTitle=g,o&&(p=!0,l()),a.$root.$on("window.resize",i),a.$root.$on("shown.bs.modal.schedule",i),a.$root.$on("hidden.bs.modal.schedule",m),a.$root.$on("reload.page",function(){a.shownBsModal&&(sessionStorage.setItem("reopenSchedule",!0),k())}),a.$root.$on("schedule.filtered",function(c,e){a.totalItems=e.length,a.itemsPerPage=n.paginationItemsPerPage=j(),a.maxSize=d.calcMaxSize(a.totalItems,b.width()),a.currentPage=1,p&&a.totalItems&&(p=!1,l(),m(),a.$root.$emit("trigger.show.calendar.modal")),a.changePage()})}]).service("paginationHelper",["paginationDefaults",function(a){this.calcMaxSize=function b(c,d){var e=c||0,f;return f=10>e?a.singleDigitCellWidth:(9*a.singleDigitCellWidth+(e-9)*a.doubleDigitCellWidth)/e,~~((d-a.navBtnCombinedWidth)/f)-1}}]).constant("paginationDefaults",{startIndex:0,limit:20,navBtnCombinedWidth:115,singleDigitCellWidth:28.7,doubleDigitCellWidth:35.4,eventRowHeightDesktop:34,eventRowHeightMobile:71,maxSize:4}),angular.module("directives").directive("popupHistory",[function(){var a=["$scope",function b(a){a.scrollbarConfig={theme:"minimal",axis:"xy",advanced:{updateOnContentResize:!0},scrollInertia:0},a.historyModalstyle={},a.$root.$on("window.resize",function(){a.historyModalstyle.width=window.calcWidth-15})}];return{transclude:!0,controller:a,restrict:"A",templateUrl:"src/app/directives/popup-history.html"}}]),angular.module("directives").directive("popupSchedule",["$timeout",function(a){var b=["$scope",function c(a){a.scrollbarConfig={theme:"minimal",axis:"xy",advanced:{updateOnContentResize:!0},scrollInertia:0},a.changeDate=function(b){a.liveEventDatePicker!=b&&(a.liveEventDatePicker=b,a.doFilterLiveEventsSchedule(),a.$root.$emit("relink.mobile.events"))},a.changeSport=function(b){a.liveEventSportPreference!=b&&(a.liveEventSportPreference=b||"",a.doFilterLiveEventsSchedule(),a.$root.$emit("relink.mobile.events"))}}];return{transclude:!0,controller:b,restrict:"A",templateUrl:"src/app/directives/popup-schedule.html"}}]),angular.module("directives").directive("sportMenu",["$timeout",function c(a){function b(){function b(a,b){return a.txtEl.width()<b.txtEl.width()?1:a.txtEl.width()>b.txtEl.width()?-1:0}var c=window.self=this;this.sports=[],this.register=function d(a){this.sports.push(a),this.sports.sort(b),this.updateAll()},this.updateAll=function e(){c.sports.length&&(a.cancel(c.$timeoutId),c.$timeoutId=a(function(){c.sports.sort(b);var a=c.sports[0].update();c.sports.forEach(function(b){b.update(a)})},100))}}function c(a,b,c,d){a.$root.$on("window.resize",d.updateAll),a.$root.$on("ui.block.toggle.leftSideBarVisible",d.updateAll),a.$root.$on("ui.block.toggle.rightSideBarVisible",d.updateAll)}return{restrict:"A",link:c,controller:b,templateUrl:"src/app/directives/sport-menu.html"}}]).directive("scaleTextToFit",["$parse","$timeout",function(a,b){function c(a,c,d,e){var f=a.ctrl,g,h=function(){b.cancel(g),g=b(f.update,100)};e?e.register(f):(h(),f.groupEvent&&(a.$root.$emit(f.groupEvent),a.$root.$on(f.groupEvent,h)),a.$root.$on("window.resize",h),a.$root.$on("ui.block.toggle.leftSideBarVisible",h),a.$root.$on("ui.block.toggle.rightSideBarVisible",h))}function d(b,c){this.options=a(c.scaleTextToFit)(),this.txtEl=b.find(this.options.textSelector),this.useGroupOptimalSize=this.options.useGroupOptimalSize,this.update=e.bind(this,b,this.txtEl,this.options,this),this.options.group&&(this.groupEvent="{}.linked".format(this.options.group)),this.options.optimalFontSize=parseInt(this.txtEl.css("font-size"))||12}function e(a,b,c,d,e){if(e)return parseInt(b.css("font-size",e));for(var f=parseInt(b.css("font-size")),g=a.width()-10,h=0;b.width()>g&&100>h;)b.css("font-size",--f),h++;for(h=0;b.width()<g&&f<c.optimalFontSize-1&&100>h;)b.css("font-size",++f),h++;return f}return{link:c,require:"?^sportMenu",controller:["$element","$attrs",d],controllerAs:"ctrl",restrict:"A"}}]),angular.module("betLobby").filter("asArray",function(){return function(a){var b=[],c;if(!(a instanceof Array)){for(c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b}return a}}),angular.module("betLobby").filter("moment",function(){return function(a,b){return moment(a).format(b)}}),angular.module("betLobby").filter("oddOrder",function(){return function(a,b){var c=[],d=[];angular.forEach(a,function(a,d){"undefined"!=typeof a.data[0]&&"undefined"!=typeof b[a.data[0].sportid][d]&&c.push("undefined"!=typeof b[a.data[0].sportid][d][window.theOddMode]?{i:d,o:b[a.data[0].sportid][d][window.theOddMode].order}:{i:d,o:b[a.data[0].sportid][d][0].order})}),c.sort(function(a,b){return a.o-b.o});var e=[];return angular.forEach(c,function(b,c){e.push(a[b.i])}),e}}),angular.module("betLobby").filter("oddOrderImproved",function(){return function(a,b){var c=[],d=window.theOddMode.toString();for(var e in a)if(a.hasOwnProperty(e)){var f=a[e];if(!f||!f.sportid)break;var g=f.sportid;b[g]&&b[g][e]&&b[g][e][d]&&(f.ui_order=b[g][e][d].order,c.push(f))}return c.sort(function(a,b){return a.ui_order<b.ui_order?-1:a.ui_order>b.ui_order?1:0}),c}}),angular.module("betLobby").filter("oddsamerican",function(){return function(a,b){b||(b=0);var c=parseFloat(a||0).toFixed(b);return a>0&&(c="+"+c),c}}),bu.filters.filter("filterOddsGroupBySport",["oddsGroupFilterConfig",function(a){return function b(c){var d=Object.keys(c),e;if(!d.length||-1==a.sportsToFilter.indexOf(c[d[0]].sportid))return c;e=[];for(var f=0,g=d.length;g>f;++f){var h=c[d[f]];+h.outcomeid===a[h.sportid]&&e.push(h)}return e}}]).value("sportConfig",{SOCCER:1,ICE_HOCKEY:2,BASKETBALL:6,TENNIS:7,AMERICAN_FOOTBALL:8,BASEBALL:10}).constant("oddsGroupFilterConfig",{sportsToFilter:[1,2,6,7,8,10],1:1,6:3,7:36,8:3,2:36,10:36}).constant("requiredMarketsForGamePageBySport",{1:[1,2],6:[36,3,2],7:[36],8:[36,3,2],2:[36,3,2],10:[36,3,2]}).constant("marketPlaceholderValuesBySport",{DEFAULT:{1:["{T1}","Draw","{T2}"],36:["{T1}","{T2}"],3:["{T1}","{T2}"],2:["Over","Under"]}}),angular.module("betLobby").filter("orderByName",function(){return function(a,b,c){var d=[];return angular.forEach(a,function(a){d.push(a)}),d.sort(function(a,c){return a[b]>c[b]?1:-1}),c&&d.reverse(),d}}),bu.filters.filter("orderByOffersExistance",["$filter","oddsGroupHelper",function(a,b){return function c(d,e,f,g,h){function i(c){var d=c.id,i=e[d]&&e[d][f],j=(new Date).getTime()/1e3;i&&g&&a("filterOddsGroupBySport")(i);var k=b.getState(i,!0);if(!k.total||h[d]&&h[d].openMarkets<1&&h[d].temporarilySuspendedMarkets<1){if(h[d]){var l=h[d];return j-l.lastupdate>30&&j-l.lastupdatedb>30?!1:!0}return!0}return k.healthy}return d.sort(function(a,b){return a.odds&&i(a,h)?-1:b.odds&&i(b,h)?1:0}),d}}]).service("oddsGroupHelper",function(){this.getState=function a(b,c){var d=0,e=0,f=0,g;for(var h in b)if(b.hasOwnProperty(h)&&(g=b[h]))for(var i in g.entries)if(g.entries.hasOwnProperty(i)&&(!c||g.lst))for(var j=g.entries[i],k=Object.keys(j),l=k.length;l--;){var m=j[k[l]].entity;m&&(++d,"AdministrativelySuspendedRemote"==m.status&&++f,"TemporarilySuspended"==m.status&&++e)}return{total:d,totalTemporarilySuspended:e,totalAdministrativelySuspended:f,healthy:d>f}}}),bu.filters.filter("stripProps",[function(){return function(a,b){var c;for(angular.isArray(b)||(b=[b]),c=b.length;c--;)delete a[b[c]];return a}}]),angular.module("betLobby").factory("ajax",["$http","$q","paginationDefaults",function(a,b,c){var d={},e;return{data:{},doBet:function(b,c,d,e,f){var g={stake:c,lines:e,isFreeplay:d,type:b};return a({url:window.servicesURLBase+"bet.php",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:"data="+encodeURIComponent(angular.toJson(g))+"&nonce="+f})},getMinMax:function(b){var c={};return c.data=JSON.stringify(b),a({url:window.servicesURLBase+"quickLimitCheck.php",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:"data="+encodeURIComponent(c.data)})},getHistory:function(f){var g=b.defer(),h={type:"transactionsByPlayer",end:9999999999,wager_status:"all",orderBy:"betcontainertimeprocessed",direction:"DESC",startIndex:c.startIndex,limit:c.limit},i=Object.keys($.extend(h,f)).map(function(a){return encodeURIComponent(a)+"="+encodeURIComponent(h[a])}).join("&");return d={},void 0!==e&&e.resolve(),e=b.defer(),a.get(window.servicesURLBase+"getter.php?"+i,{timeout:e.promise}).success(function(a){d=a,g.resolve()}),g.promise},getHistData:function(){return d}}}]),angular.module("betLobby").factory("EventOutcomeFromStringRepresentation",["EventOutcome",function d(a){function b(b,c){var d=function(){return console.log(1)};if("string"!=typeof b)return d();var e=b.split("\u2029");if(!e||e.length<41)return d();var f=e[0],g=e[1],h=parseInt(e[2]),i=parseInt(e[3]),j=parseInt(e[4]),k=parseFloat(e[5]),l=e[6],m=e[7],n=parseFloat(e[8]),o=parseFloat(e[9]),p=parseFloat(e[10]),q=e[11],r=e[12],s=e[13],t=parseInt(e[14]),u=e[15],v=e[16],w=parseFloat(e[17]),x=parseInt(e[18]),y=parseFloat(e[19]),z=e[20],A="1"==e[21],B="1"==e[22],C="1"==e[23],D=parseInt(e[24]),E=parseInt(e[25]),F=parseInt(e[26]),G=e[27],H=e[28],I=parseFloat(e[29]),J=parseFloat(e[30]),K=e[31],L=e[32],M=e[33],N=parseInt(e[34]),O=parseInt(e[35]),P=parseInt(e[36]),Q=e[37],R=e[38],S="1"==e[39],T=e[40],U=m,V=m,W=c.true_right_hand_team_name,X=c.true_left_hand_team_name,Y=c.team_separator_parsed;return new a(f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,Y,W,X)}return b}]),angular.module("betLobby").factory("ws",["$rootScope",function(a){var b={};return b.activeSubscriptions=[],b.connect=function(c){return b.activeSubscriptions=[],"undefined"!=typeof io&&(console.log("Connection successful..."),b.ws=io.connect(window.wsServer,{transports:["websocket","polling"]}),b.ws)?(b.ws.on("message",function(c){b.callback?(c=angular.fromJson(c),a.$broadcast("receive."+c.command,c),b.callback(c)):console.log("WS.watch was not called; data lost: \n"+c)}),b.ws.on("bridge_reconnected",function(){b.callback("bridge_reconnected")}),a.$broadcast("webSocketReconnected"),c(!0),!0):(console.log("Connection failed..."),c(!1),!1)},b.send=function(c){a.$broadcast("send."+c.command,c),b.ws?b.ws.emit("message",angular.toJson(c)):b.connect(function(a){a&&b.send(c)})},b.ping=function(){b.send({command:"ping"})},b.sports=function(a){b.send({command:"get",data:a})},b.odds=function(a,c){b.send({command:"get",data:{what:"odds",eventid:a,profile:-999,bookmakerid:13,lst:c,status:["Open","TemporarilySuspended"]}})},b.gameCast=function(a){b.send({command:"get",data:{what:"gamecast",subscribe:!0,eventid:a}})},b.outcome=function(a){b.send({command:"get",data:{what:"frontend",subject:"outcome"+a}})},b.liveSchedule=function(){b.send({command:"get",data:{what:"liveSchedule"}})},b.limits=function(a,c,d,e,f){b.send({command:"get",data:{what:"limit",userID:e.toString(),frontendID:c,clientID:d,type:f,lines:a}})},b.subscribe=function(a){b.send({command:"subscribe",subject:a}),b.activeSubscriptions.indexOf(a)<0&&b.activeSubscriptions.push(a)},b.unSubscribe=function(a){b.send({command:"unsubscribe",subject:a}),b.activeSubscriptions.indexOf(a)>=0&&b.activeSubscriptions.splice(b.activeSubscriptions.indexOf(a),1)},b.marketCounts=function(){b.send({command:"get",data:{what:"marketcount"}})},b.watch=function(a){b.callback=a},b}]),addPrototypeMethod(String,"capitalize",function(){return this.substr(0,1).toUpperCase()+this.substr(1)}),addPrototypeMethod(String,"unCapitalize",function(){return this.substr(0,1).toLowerCase()+this.substr(1)}),addPrototypeMethod(String,"format",function(){var a=arguments,b=0;return this.replace(/{(\d+)?}/g,function(c,d){return a[void 0!==d?d:b++]})}),addPrototypeMethod(String,"startsWith",function(a){return 0===this.indexOf(a)}),addPrototypeMethod(String,"endsWith",function(a){var b=this.indexOf(a);return-1!==b&&b===this.length-a.length}),addPrototypeMethod(String,"includes",function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),addPrototypeMethod(String,"encodeHTML",function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/[ ]{2}/gi,function(){return" &nbsp;"}).replace(/"/g,"&quot;")}),addPrototypeMethod(String,"decodeHTML",function(){return this.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&quot;/g,'"')}),addPrototypeMethod(CanvasRenderingContext2D,"roundRect",function(a,b,c,d,e,f){this.beginPath(),this.moveTo(a+e,b),this.lineTo(a+c-e,b),this.quadraticCurveTo(a+c,b,a+c,b+e),this.lineTo(a+c,b+d-e),this.quadraticCurveTo(a+c,b+d,a+c-e,b+d),this.lineTo(a+e,b+d),this.quadraticCurveTo(a,b+d,a,b+d-e),this.lineTo(a,b+e),this.quadraticCurveTo(a,b,a+e,b),this.fillStyle=f,this.fill()}),addPrototypeMethod(Array,"first",function(){return this[0]}),addPrototypeMethod(Array,"last",function(){return this[this.length-1]}),addPrototypeMethod(Array,"peek",function(){return this.last()}),addPrototypeMethod(Array,"delete",function(a){var b=this.indexOf(a);return b>-1?(this.splice(b,1),!0):!1}),addPrototypeMethod(Array,"add",function(a){var b=this.indexOf(a);return-1===b?(this.push(a),!0):!1}),addPrototypeMethod(Array,"clean",function(a){for(var b=0;b<this.length;++b)this[b]==a&&this.splice(b--,1);return this}),addPrototypeMethod(Array,"empty",function(){this.splice(0,this.length)}),addPrototypeMethod(Array,"isEmpty",function(){return 0===this.length}),Array.prototype.find||addPrototypeMethod(Array,"find",function(a){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof a)throw new TypeError("undefined is not a function");for(var b=Object(this),c=b.length>>>0,d=arguments[1],e,f=0;c>f;f++)if(e=b[f],a.call(d,e,f,b))return e;return void 0}),addPrototypeMethod(Array,"max",function(){return Math.max.apply(null,this)}),addPrototypeMethod(Array,"min",function(){return Math.min.apply(null,this)}),addPrototypeMethod(Array,"swap",function(a,b){var c=this[a];return this[a]=this[b],this[b]=c,this}),addPrototypeMethod(Array,"includes",function(a){if(void 0===this||null===this)throw new TypeError("Cannot convert this value to object");var b=Object(this),c=parseInt(b.length)||0;if(0===c)return!1;var d=parseInt(arguments[1])||0,e;for(d>=0?e=d:(e=c+d,0>e&&(e=0));c>e;){var f=b[e];if(a===f)return!0;e++}return!1}),addPrototypeMethod(Array,"sortBy",function(a){return this.sort(function(b,c){var d=b[a],e=c[a];return e>d?-1:d===e?0:1})}),Math.clip||(Math.clip=function(a,b,c){if(b>c){var d=b;b=c,c=d}return a>=c?c:b>=a?b:a}),Math.roundTo||(Math.roundTo=function(a,b){return Math.round(a/b)*b}),Math.sign||(Math.sign=function(a){return 0>a?-1:a>0?1:0}),Math.isInt||(Math.isInt=function e(a){return Number(a)===a&&a%1===0}),Math.isFloat||(Math.isFloat=function f(a){return a===Number(a)&&a%1!==0}),function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();var sort_by;!function(){var a=function(a,b){return a==b?0:b>a?-1:1},b=function(b,c){var d=a;return b&&(d=function(c,d){return a(b(c),b(d))}),c?function(a,b){return-1*d(a,b)}:d};sort_by=function(){for(var c=[],d=arguments.length,e,f,g,h,i=0;d>i;i++)e=arguments[i],"string"==typeof e?(f=e,h=a):(f=e.name,h=b(e.primer,e.reverse)),c.push({name:f,cmp:h});return function(a,b){for(var f,g,h,i,j,k=0,l=d;l>k&&(j=0,e=c[k],h=e.name,i=e.cmp,j=i(a[h],b[h]),0===j);k++);return j}}}(),bu.utils.directive("relinkTree",function(){return{transclude:"element",restrict:"A",link:function(a,b,c,d,e){var f=null,g=function(){f&&(f.remove(),f=null),e(function(a){b.parent().append(a),f=a})};g(),a.$root.$on(c.relinkTree,g)}}}),bu.utils.service("defer",["$timeout","$interval",function(a,b){this.hashMap={},this.groupMap={},this.once=function c(b,d,e){var f=this;a.cancel(this.hashMap[b]),this.hashMap[b]=a(function(){delete f.hashMap[b],e()},d)},this.group=function d(a,b,c){var d=this,e;(e=this.groupMap[a])||(e=this.groupMap[a]=[]),e.push(c),this.once(a,b,function(){for(var b=0,c=e.length;c>b;++b)e[b]();delete d.groupMap[a]})},this.doWhen=function e(a,c,d){var e=angular.extend({checkInterval:1e3,giveUpTime:3e4},d),f=moment(),g=b(function(){a()?(c(),b.cancel(g)):moment().diff(f)>e.giveUpTime&&b.cancel(g)},e.checkInterval)}}]),bu.get=function g(a){var b=document.querySelector("body");return angular.element(b).injector().get(a)},bu.s=function h(a){return window.s=$(a||"body").scope()},angular.module("buTemplates").run(["$templateCache",function(a){"use strict";a.put("src/app/directives/popup-history.html","<div class=\"modal-dialog modal-lg modal-cws\" ng-style=historyModalstyle><div class=modal-content><div class=modal-header><button type=button class=\"close cws-close\" data-dismiss=modal aria-label=Close><span aria-hidden=true>×</span></button><h4 class=\"modal-title ng-binding\" translate=General.MY_TRANSACTION_HISTORY></h4></div><div class=modal-header ng-hide=historyTransactionDetails><label translate=Transaction.VIEW_TRANSACTIONS></label><select ng-model=historyTransactionsRange ng-change=doFilterHistoryTransactions()><option value=7>{{ 'Transaction.LAST' | translate }} 7 {{ 'Transaction.DAYS' | translate }}</option><option value=30>{{ 'Transaction.LAST' | translate }} 30 {{ 'Transaction.DAYS' | translate }}</option><option value=60>{{ 'Transaction.LAST' | translate }} 60 {{ 'Transaction.DAYS' | translate }}</option><option value=90>{{ 'Transaction.LAST' | translate }} 90 {{ 'Transaction.DAYS' | translate }}</option><option value=180>{{ 'Transaction.LAST' | translate }} 180 {{ 'Transaction.DAYS' | translate }}</option><option value=99999>({{ 'Transaction.ALL_TRANSACTIONS' | translate }})</option></select><label translate=Transaction.TYPE_OF_WAGERS></label><select ng-model=historyTransactionsWagerStatus ng-change=doFilterHistoryTransactions()><option value=all translate=Transaction.ALL_WAGERS></option><option value=pending translate=Transaction.ONLY_PENDING_WAGERS></option><option value=graded translate=Transaction.ONLY_GRADED_WAGERS></option></select></div><div class=modal-header ng-controller=HistoryPaginationController><uib-pagination ng-change=changePage() items-per-page=itemsPerPage total-items=totalItems ng-model=currentPage max-size=maxSize num-pages=numPages rotate=false class=pagination-sm></uib-pagination></div><div class=modal-body><div class=historyTransactionsContainer ng-hide=\"historyTransactionDetails || windowWidth < 900\"><p ng-show=\"historyTransactionsListFiltered.length <= 0\"><i translate=Transaction.NO_TRANSACTIONS></i></p><table border=0 class=\"special popupHistoryTable\"><tr class=header><td><a href=\"\" ng-click=\"setSortFactorHistoryTransactions('betcontainertimeprocessed')\">{{ 'Transaction.DATE_ACCEPTED' | translate }} <span ng-if=\"historyTransactionsSortFactor == 'betcontainertimeprocessed' && historyTransactionsSortDirection == 'ASC'\">&uarr;</span> <span ng-if=\"historyTransactionsSortFactor == 'betcontainertimeprocessed' && historyTransactionsSortDirection == 'DESC'\">&darr;</span></a></td><td><a href=\"\" ng-click=\"setSortFactorHistoryTransactions('betcontainerid')\">{{ 'Transaction.WAGER_ID' | translate }} <span ng-if=\"historyTransactionsSortFactor == 'betcontainerid' && historyTransactionsSortDirection == 'ASC'\">&uarr;</span> <span ng-if=\"historyTransactionsSortFactor == 'betcontainerid' && historyTransactionsSortDirection == 'DESC'\">&darr;</span></a></td><td><a href=\"\" ng-click=\"setSortFactorHistoryTransactions('risk')\">{{ 'Transaction.RISK_AMOUNT' | translate }} <span ng-if=\"historyTransactionsSortFactor == 'risk' && historyTransactionsSortDirection == 'ASC'\">&uarr;</span> <span ng-if=\"historyTransactionsSortFactor == 'risk' && historyTransactionsSortDirection == 'DESC'\">&darr;</span></a></td><td><a href=\"\" ng-click=\"setSortFactorHistoryTransactions('towin')\">{{ 'Transaction.TO_WIN' | translate }} <span ng-if=\"historyTransactionsSortFactor == 'towin' && historyTransactionsSortDirection == 'ASC'\">&uarr;</span> <span ng-if=\"historyTransactionsSortFactor == 'towin' && historyTransactionsSortDirection == 'DESC'\">&darr;</span></a></td><td><a href=\"\" ng-click=\"setSortFactorHistoryTransactions('eventdate')\">{{ 'Transaction.BET_DESCRIPTION' | translate }} <span ng-if=\"historyTransactionsSortFactor == 'eventdate' && historyTransactionsSortDirection == 'ASC'\">&uarr;</span> <span ng-if=\"historyTransactionsSortFactor == 'eventdate' && historyTransactionsSortDirection == 'DESC'\">&darr;</span></a></td><td ng-show=\"showRebateColumn && !isMobile && !isSmallScreen\"><a href=\"\" ng-click=\"setSortFactorHistoryTransactions('rebate_percentage')\">Rebate % <span ng-if=\"historyTransactionsSortFactor == 'rebate_percentage' && historyTransactionsSortDirection == 'ASC'\">&uarr;</span> <span ng-if=\"historyTransactionsSortFactor == 'rebate_percentage' && historyTransactionsSortDirection == 'DESC'\">&darr;</span></a></td><td ng-show=\"showRebateColumn && !isMobile && !isSmallScreen\"><a href=\"\" ng-click=\"setSortFactorHistoryTransactions('last_settlement_pre_rebate')\">{{ 'Transaction.SETTLEMENT_AMOUNT' | translate }} <span ng-if=\"historyTransactionsSortFactor == 'last_settlement_pre_rebate' && historyTransactionsSortDirection == 'ASC'\">&uarr;</span> <span ng-if=\"historyTransactionsSortFactor == 'last_settlement_pre_rebate' && historyTransactionsSortDirection == 'DESC'\">&darr;</span></a></td><td ng-show=\"showRebateColumn && !isMobile && !isSmallScreen\"><a href=\"\" ng-click=\"setSortFactorHistoryTransactions('last_settlement_rebate_amount')\">Rebate <span ng-if=\"historyTransactionsSortFactor == 'last_settlement_rebate_amount' && historyTransactionsSortDirection == 'ASC'\">&uarr;</span> <span ng-if=\"historyTransactionsSortFactor == 'last_settlement_rebate_amount' && historyTransactionsSortDirection == 'DESC'\">&darr;</span></a></td><td ng-if=\"!isMobile && !isSmallScreen\"><a href=\"\" ng-click=\"setSortFactorHistoryTransactions('last_settlement_amount')\">{{ 'Transaction.TOTAL_SETTLEMENT' | translate }} <span ng-if=\"historyTransactionsSortFactor == 'last_settlement_amount' && historyTransactionsSortDirection == 'ASC'\">&uarr;</span> <span ng-if=\"historyTransactionsSortFactor == 'last_settlement_amount' && historyTransactionsSortDirection == 'DESC'\">&darr;</span></a></td><td ng-if=\"!isMobile && !isSmallScreen\"><a href=\"\" ng-click=\"setSortFactorHistoryTransactions('last_settlement_date')\">{{ 'Transaction.DATE_SETTLED' | translate }} <span ng-if=\"historyTransactionsSortFactor == 'last_settlement_date' && historyTransactionsSortDirection == 'ASC'\">&uarr;</span> <span ng-if=\"historyTransactionsSortFactor == 'last_settlement_date' && historyTransactionsSortDirection == 'DESC'\">&darr;</span></a></td><td><a href=\"\" ng-click=\"setSortFactorHistoryTransactions('status')\">{{ 'Transaction.STATUS' | translate }} <span ng-if=\"historyTransactionsSortFactor == 'status' && historyTransactionsSortDirection == 'ASC'\">&uarr;</span> <span ng-if=\"historyTransactionsSortFactor == 'status' && historyTransactionsSortDirection == 'DESC'\">&darr;</span></a></td></tr><tbody ng-hide=historyRequesting><tr ng-repeat=\"transaction in historyTransactionsListFiltered| orderBy:'sort_order' \"><td ng-bind=transaction.m_wagerdate></td><td ng-bind=transaction.betcontainer_id></td><td ng-bind=transaction.m_wageramount></td><td ng-bind=transaction.m_towin></td><td ng-bind-html=transaction.descriptionTrust></td><td ng-show=\"showRebateColumn && !isMobile && !isSmallScreen\" ng-bind=transaction.m_rebate_percentage></td><td ng-show=\"showRebateColumn && !isMobile && !isSmallScreen\" ng-bind=transaction.m_settlement_pre_rebate></td><td ng-show=\"showRebateColumn && !isMobile && !isSmallScreen\" ng-bind=transaction.m_settlement_rebate></td><td ng-if=\"!isMobile && !isSmallScreen\" ng-bind=transaction.m_settlement_total></td><td ng-if=\"!isMobile && !isSmallScreen\" ng-bind=transaction.m_settlementdate></td><td ng-bind=transaction.m_status></td></tr></tbody></table><div class=loadingOverlay ng-show=historyRequesting></div></div><div class=historyTransactionsContainer ng-hide=\"historyTransactionDetails || windowWidth >= 900\"><p ng-show=\"historyTransactionsListFiltered.length <= 0\"><i translate=Transaction.NO_TRANSACTIONS></i></p><table border=0 class=\"special popupHistoryTable\"><tr class=header><td><a href=\"\" ng-click=\"setSortFactorHistoryTransactions('betcontainertimeprocessed')\">{{ 'Transaction.DATE_ACCEPTED' | translate }} <span ng-if=\"historyTransactionsSortFactor == 'betcontainertimeprocessed' && historyTransactionsSortDirection == 'ASC'\">&uarr;</span> <span ng-if=\"historyTransactionsSortFactor == 'betcontainertimeprocessed' && historyTransactionsSortDirection == 'DESC'\">&darr;</span></a></td><td><a href=\"\" ng-click=\"setSortFactorHistoryTransactions('eventdate')\">{{ 'Transaction.BET_DESCRIPTION' | translate }} <span ng-if=\"historyTransactionsSortFactor == 'eventdate' && historyTransactionsSortDirection == 'ASC'\">&uarr;</span> <span ng-if=\"historyTransactionsSortFactor == 'eventdate' && historyTransactionsSortDirection == 'DESC'\">&darr;</span></a></td></tr><tbody ng-hide=historyRequesting><tr ng-repeat=\"transaction in historyTransactionsListFiltered| orderBy:'sort_order' \"><td ng-bind=transaction.m_wagerdate></td><td>Ticket ID: {{ transaction.betcontainer_id }}<br><span ng-bind-html=transaction.descriptionTrust></span><br>Risk {{ transaction.m_wageramount }}<wbr>to win<wbr>{{ transaction.m_towin }}<br><span class=ticketStatus>{{ transaction.m_status }}</span></td></tr></tbody></table><div class=loadingOverlay ng-show=historyRequesting></div></div></div></div></div>"),a.put("src/app/directives/popup-schedule.html",'<div class="modal-dialog modal-lg modal-cws"><div class=modal-content><div class=modal-header><button type=button class="close cws-close" data-dismiss=modal aria-label=Close><span aria-hidden=true>×</span></button><h4 class=modal-title>{{ oddMode == 1 ? \'General.LIVE_INPLAY\' : \'General.PREMATCH\' | translate }} {{ \'General.SCHEDULE\' | translate }}</h4></div><div class=modal-header ng-controller=SchedulePaginationController><div ng-if=data.isMobile><div class="btn-group btn-group-sport"><div ng-click=changeSport() class="btn nopadding sport-item"><i title=All class=ic-sp ng-class="{active: data.liveEventSportPreference == \'\'}"></i></div><div ng-repeat="(keySport, nameSport) in liveScheduleSports track by $index" ng-click=changeSport(keySport); class="btn nopadding sport-item"><i title="{{\'Sport.\' + nameSport | translate}}" class="ic-sp ic-sp-{{::keySport}}" ng-class="{active: data.liveEventSportPreference == keySport}"></i></div></div></div><div ng-if=!data.isMobile><div><uib-pagination ng-change=changePage(true) items-per-page=itemsPerPage total-items=totalItems ng-model=modalCtx.currentPage max-size=maxSize num-pages=numPages rotate=false class=pagination-sm></uib-pagination></div><div style="line-height: 30px; height: 30px"><div><label translate=Sport.Sport></label><select ng-model=data.liveEventSportPreference ng-change=data.doFilterLiveEventsSchedule()><option value="" selected translate=General.ALL></option><option ng-repeat="(keySport, nameSport) in liveScheduleSports track by $index" value={{keySport}}>{{\'Sport.\' + nameSport | translate}}</option></select><label>{{ getFilterTitle() }}</label><input class=search-input type=text placeholder=Filter ng-model=data.modalSearchQuery ng-init=filterEvents() ng-change=filterEvents()></div></div></div></div><div class=modal-body ng-class="{\'modal-body-nobottom\': !isMobile}"><div class="btn-group btn-group-justified"><div ng-repeat="(key, dailyEvents) in liveScheduleListEST" ng-class="{active: liveEventDatePicker == key}" ng-click=changeDate(key) class="btn btn-default nopadding">{{key | moment:\'MM/DD\'}}<br><b ng-if="!(isMobile || isSmallScreen)">{{key | moment:\'dddd\'}}</b> <b ng-if="(isMobile || isSmallScreen)">{{key | moment:\'ddd\'}}</b></div></div><div class=historyTransactionsContainer ng-hide=historyTransactionDetails><table ng-if=!isMobile border=0 class="special popupHistoryTable"><tr class=header><td class=line-number></td><td class=time><b>{{ \'General.TIME\' | translate }} ({{ tzConfig.label}})</b></td><td class=sport-sel ng-if="liveEventSportPreference == \'\'"><b translate=Sport.Sport></b></td><td><b translate=General.EVENT-DESCRIPTION></b></td></tr><tbody ng-if="liveScheduleListFiltered.length != 0"><tr ng-repeat="entry in liveScheduleListFilteredPage"><td>{{ ($index + 1) + (paginationItemsPerPage * (modalPaginationPage - 1))}}</td><td>{{utcToEasternStringMin(entry.eventTimeParsed)}}</td><td ng-if="liveEventSportPreference == \'\'" translate=Sport.{{entry.sportName}}></td><td>{{entry.hometeamname}} - {{entry.awayteamname}}</td></tr></tbody></table><table ng-if=isMobile border=0 class="special centered popupHistoryTable"><tr class=header><td ng-if="liveEventSportPreference == \'\'"><b translate=Sport.Sport></b></td><td><b translate=General.EVENT-DESCRIPTION></b></td></tr><tbody relink-tree=relink.mobile.events ng-if="liveScheduleListFiltered.length != 0"><tr ng-repeat="entry in ::liveScheduleListFilteredPage"><td ng-if="liveEventSportPreference == \'\'"><i title="{{\'Sport.\' + entry.sportName | translate}}" class="ic-sp ic-sp-{{::entry.sportid}}"></i></td><td><b>{{utcToEasternStringMin(entry.eventTimeParsed)}}</b><br><div class=name-wrapper><div ng-bind="::entry.hometeamname + \' -\'"></div><br><div ng-bind=::entry.awayteamname></div></div></td></tr></tbody></table><p ng-show="liveScheduleListFiltered.length <= 0"><i translate=General.NO-LIVE-EVENTS></i></p></div></div></div></div>'),
a.put("src/app/directives/sport-menu.html",'<div class="sports-live-menu-wrapper btn-group btn-group-justified col-xs-12 col-sm-12 col-md-12 col-lg-12" ng-if="!isMobile && oddMode == 1 && !(loadingSports || !assetsReady() || emergency_mode)"><div class="sports live btn col-sm-4 col-md-4 col-lg-4" ng-repeat="sport in (sports | orderByName: \'name\') track by sport.id" ng-click=getLeaguesWrapper(sport.name) scale-text-to-fit="{ textSelector: \'h2\', group: \'sports-menu\', useGroupOptimalSize: true}" ng-class="{\'active\':(sport.id == sportOpened.id || (leagueOpened.length > 0 && leagueOpened[0].sportid == sport.id))}"><div class=sport-menu-item-wrapper><i title="{{\'Sport.\' + sport.name | translate}}" class="ic-sp ic-sp-{{::sport.id}}"></i><h2 title="{{\'Sport.\' + sport.name | translate}}">+{{objectLeaguesAllEvents(sport.leagues)}} <span translate=Sport.{{::sport.name}}></span></h2></div></div></div>'),a.put("src/app/templates/gc-soccer.html",'<div class=gamecastImageArea><img class="gci 1 default" src="assets/gc/default.gif"> <img class="gci 1 1-possession" src="assets/gc/1-possession.gif"> <img class="gci 1 1-attack" src="assets/gc/1-attack.gif"> <img class="gci 1 1-dangerous_attack" src="assets/gc/1-dangerous_attack.gif"> <img class="gci 1 1-corner_bottom" src="assets/gc/1-corner_bottom.gif"> <img class="gci 1 1-corner_top" src="assets/gc/1-corner_top.gif"> <img class="gci 1 1-goal" src="assets/gc/1-goal.gif"> <img class="gci 1 1-kickoff" src="assets/gc/1-kickoff.gif"> <img class="gci 1 1-penalty" src="assets/gc/1-penalty.gif"> <img class="gci 1 1-penalty_missed" src="assets/gc/1-penalty_missed.gif"> <img class="gci 1 1-penalty_scored" src="assets/gc/1-penalty_scored.gif"> <img class="gci 1 1-red" src="assets/gc/1-red.gif"> <img class="gci 1 1-shot_off_target" src="assets/gc/1-shot_off_target.gif"> <img class="gci 1 1-shot_on_target" src="assets/gc/1-shot_on_target.gif"> <img class="gci 1 1-substitution" src="assets/gc/1-substitution.gif"> <img class="gci 1 1-yellow" src="assets/gc/1-yellow.gif"> <img class="gci 1 1-dangerous_freekick" src="assets/gc/1-dangerous_freekick.gif"> <img class="gci 1 1-freekick" src="assets/gc/1-freekick.gif"> <img class="gci 1 1-throwin" src="assets/gc/1-throwin.gif"> <img class="gci 1 1st_started" src="assets/gc/1st_started.gif"> <img class="gci 1 2-attack" src="assets/gc/2-attack.gif"> <img class="gci 1 2-corner_bottom" src="assets/gc/2-corner_bottom.gif"> <img class="gci 1 2-corner_top" src="assets/gc/2-corner_top.gif"> <img class="gci 1 2-dangerous_attack" src="assets/gc/2-dangerous_attack.gif"> <img class="gci 1 2-goal" src="assets/gc/2-goal.gif"> <img class="gci 1 2-kickoff" src="assets/gc/2-kickoff.gif"> <img class="gci 1 2-penalty" src="assets/gc/2-penalty.gif"> <img class="gci 1 2-penalty_missed" src="assets/gc/2-penalty_missed.gif"> <img class="gci 1 2-penalty_scored" src="assets/gc/2-penalty_scored.gif"> <img class="gci 1 2-possession" src="assets/gc/2-possession.gif"> <img class="gci 1 2-red" src="assets/gc/2-red.gif"> <img class="gci 1 2-shot_off_target" src="assets/gc/2-shot_off_target.gif"> <img class="gci 1 2-shot_on_target" src="assets/gc/2-shot_on_target.gif"> <img class="gci 1 2-substitution" src="assets/gc/2-substitution.gif"> <img class="gci 1 2-yellow" src="assets/gc/2-yellow.gif"> <img class="gci 1 2-dangerous_freekick" src="assets/gc/2-dangerous_freekick.gif"> <img class="gci 1 2-freekick" src="assets/gc/2-freekick.gif"> <img class="gci 1 2-throwin" src="assets/gc/2-throwin.gif"> <img class="gci 1 2ndhalf_started" src="assets/gc/2ndhalf_started.gif"> <img class="gci 1 end_et" src="assets/gc/end_et.gif"> <img class="gci 1 et_1st_started" src="assets/gc/et_1st_started.gif"> <img class="gci 1 et_2nd_started" src="assets/gc/et_2nd_started.gif"> <img class="gci 1 et_ht" src="assets/gc/et_ht.gif"> <img class="gci 1 field.jpg" src="assets/gc/field.jpg"> <img class="gci 1 ft" src="assets/gc/ft.gif"> <img class="gci 1 ht" src="assets/gc/ht.gif"> <img class="gci 1 offsides" src="assets/gc/offsides.gif"> <img class="gci 1 penalty_shootout" src="assets/gc/penalty_shootout.gif"></div>')}]);